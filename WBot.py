from email.mime import text
import os, sys, time, random, re
import vk_api 
from vk_api.longpoll import VkLongPoll, VkEventType
from requests.exceptions import ProxyError, ReadTimeout, ConnectionError
import socket
from colorama import Fore, Style, init
from collections import Counter
from collections import deque
import requests

# ==================== –ù–ê–°–¢–†–û–ô–ö–ò –ü–ï–†–ï–ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø ====================
MAX_RETRIES = 5
RETRY_DELAY = 3
LONGPOLL_TIMEOUT = 25
# ==================== –ù–ê–°–¢–†–û–ô–ö–ò –¢–ï–•. –ö–û–ú–ú–ê–ù–î ====================
BOT_ACTIVE = True
# ==================== –û–ë–†–ê–ë–û–¢–ö–ê –ö–ê–ü–ß–ò ====================

# ==================== –§–£–ù–ö–¶–ò–ò –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø ====================
def create_vk_session(token, max_attempts=MAX_RETRIES):
    """–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ VK —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–∞–ø—á–∏"""
    for attempt in range(1, max_attempts + 1):
        try:
            print(f"{Fore.CYAN}[CONNECTION] –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è {attempt}/{max_attempts}{Fore.RESET}")
            vk_session = vk_api.VkApi(token=token)
            vk = vk_session.get_api()
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
            vk.users.get()
            
            print(f"{Fore.GREEN}[CONNECTION] –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ!{Fore.RESET}")
            return vk_session
            
        except vk_api.Captcha as captcha:
            print(f"{Fore.YELLOW}[CAPTCHA] –ö–∞–ø—á–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º...{Fore.RESET}")
            if attempt < max_attempts:
                time.sleep(RETRY_DELAY * 2)
                continue
            else:
                raise
                
        except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
            print(f"{Fore.RED}[CONNECTION ERROR] {e}{Fore.RESET}")
            if attempt < max_attempts:
                delay = RETRY_DELAY * attempt
                print(f"{Fore.YELLOW}[RETRY] –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay} —Å–µ–∫...{Fore.RESET}")
                time.sleep(delay)
            else:
                print(f"{Fore.RED}[CONNECTION FAILED] –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è{Fore.RESET}")
                raise
        except Exception as e:
            print(f"{Fore.RED}[UNEXPECTED ERROR] {e}{Fore.RESET}")
            raise

def create_longpoll(vk_session, max_attempts=MAX_RETRIES):
    """–°–æ–∑–¥–∞–Ω–∏–µ longpoll —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏"""
    for attempt in range(1, max_attempts + 1):
        try:
            print(f"{Fore.CYAN}[LONGPOLL] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è {attempt}/{max_attempts}{Fore.RESET}")
            longpoll = VkLongPoll(vk_session, wait=LONGPOLL_TIMEOUT)
            print(f"{Fore.GREEN}[LONGPOLL] –£—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è!{Fore.RESET}")
            return longpoll
            
        except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
            print(f"{Fore.RED}[LONGPOLL ERROR] {e}{Fore.RESET}")
            if attempt < max_attempts:
                delay = RETRY_DELAY * attempt
                print(f"{Fore.YELLOW}[RETRY] –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {delay} —Å–µ–∫...{Fore.RESET}")
                time.sleep(delay)
            else:
                raise
        except Exception as e:
            print(f"{Fore.RED}[UNEXPECTED LONGPOLL ERROR] {e}{Fore.RESET}")
            raise

# ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
TOKEN = os.getenv("VK_TOKEN")
iid = -182985865     
mid = 697718287

vk_session = None
session_api = None
longpoll = None
vk = None

LAST_UNPROCESSED_EVENT = None

def initialize_connection():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π"""
    global vk_session, session_api, longpoll, vk
    
    vk_session = create_vk_session(TOKEN)
    session_api = vk_session.get_api()
    vk = vk_session.get_api()
    longpoll = create_longpoll(vk_session)
# ==================== –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´ ====================
New_items = {}
GAME_STATE = {
    "trophies": None,
    "karma": None,
    "injuries": None,
    "fish": 0,
    "meat": 0,
    "stealth": None,
    "effects": [],
    "quest": None,
    "HP": None,
    "Hunger": 0,
    "INV": None
}

LAST_BUTTONS = []
SAVED_BUTTONS = []
TRIED_LETTERS = set()
LIGHTS_OUT_SOLUTION = None

waiting_location = None
waiting_since = 0
WAIT_TIMEOUT = 5

crossroad_PRIORITY = {
    "–ü–µ—â–µ—Ä–∞ —á—É–¥–µ—Å": 1,
    "–ö–≤–∞–¥—Ä–∞—Ç —Ä—É–Ω": 2,
    "–†—ã–±–∞–ª–∫–∞": 3,
    "–ö–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç": 4,
    "–°—É–Ω–¥—É–∫": 5,
    "–ì–æ—Ä—à–æ–∫:": 6,
    "–í–µ–¥—å–º–∞": 7,
    "–†—É–Ω–Ω—ã–π –∫–∞–º–µ–Ω—å": 8,
    "–ë–ª—É–∂–¥–∞—é—â–∏–π –º–∞–≥–∞–∑–∏–Ω": 9,
    "–¢—Ä–∏ –¥–≤–µ—Ä–∏": 10,
    "–ò—Å–ø—ã—Ç–∞–Ω–∏–µ": 11,
    "–ú—É–¥—Ä–µ—Ü": 12,
    "–†—É–∏–Ω—ã": 13,
    "–í—Ä–∞–≥": 14,
    "–û—Ç—à–µ–ª—å–Ω–∏–∫": 15,
    "–£–≥–æ–¥—å—è": 16,
    "–õ–∞–±–∏—Ä–∏–Ω—Ç": 17,

}
crossroad = {
    "–ü–µ—â–µ—Ä–∞ —á—É–¥–µ—Å": [
        "—Å—é–¥–∞!",
        "—É–¥–∞—á–∏!",
        "—É–∑—Ä–∏, –Ω–µ—á—Ç–æ –ø–æ—Ç—Ä—è—Å–∞—é—â–µ–µ",
        "–ø–æ–¥—É–º–∞–π —Ö–æ—Ä–æ—à–µ–Ω—å–∫–æ!",
        "–º–æ–ª–æ–¥–µ—Ü!",
        "–≤–ø–µ—Ä–µ–¥–∏ –ø–µ—â–µ—Ä–∞",
        "—Å–ª—É—à–∞–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ...",
        "–ù–µ —Å–¥–∞–≤–∞–π—Å—è",
    ],
    "–ö–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç": [
        "–±—É–¥—å —É –º–µ–Ω—è —Ç—Ä–æ—Ñ–µ–∏?",
        "–ª–∂–µ—Ü, –æ –ª–∂–µ—Ü"
    ],
    "–û—Ç—à–µ–ª—å–Ω–∏–∫": [
        "–¥—Ä—É–≥? –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ...",
        "—É–∑—Ä–∏, –¥—Ä—É–≥!",
        "–≤–ø–µ—Ä–µ–¥–∏ –¥—Ä—É–≥"
    ],
    "–†—É–Ω–Ω—ã–π –∫–∞–º–µ–Ω—å": [
        "–∫–∞–º–µ–Ω—å —è–≤–ª—è–µ—Ç—Å—è –≤ –≤–∏–¥–µ–Ω–∏—è—Ö...",
        "–≤–ø–µ—Ä–µ–¥–∏ –∫–∞–º–µ–Ω—å",
        "—É–∑—Ä–∏, –∫–∞–º–µ–Ω—å!"
    ],
    "–õ–∞–±–∏—Ä–∏–Ω—Ç": [
        "–Ø —Ö–æ—á—É –¥–æ–º–æ–π...",
        "–ù–µ –≤–µ—Ä—é...",
        "–≠—Ç–æ –Ω–µ–≤—ã–Ω–æ—Å–∏–º–æ...",
    ],
    "–†—ã–±–∞–ª–∫–∞": [
        "–±—É–¥—å —É –º–µ–Ω—è —É–¥–æ—á–∫–∞?",
        "–∫—Ä–∞—Å–∏–≤–æ...",
        "–≤–ø–µ—Ä–µ–¥–∏ –Ω–µ—á—Ç–æ –ø–æ—Ç—Ä—è—Å–∞—é—â–µ–µ",
        "–æ–∑–µ—Ä–æ —è–≤–ª—è–µ—Ç—Å—è –≤ –≤–∏–¥–µ–Ω–∏—è—Ö...",
        "—Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–¥–∫–∞",
        "—Ä—ã–±–∞–ª–∫–∞ —Å–µ–π—á–∞—Å –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç...",
        "—É–¥–æ—á–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è?",
        "—É–∑—Ä–∏, –æ–∑–µ—Ä–æ!"
    ],
    "–ë–ª—É–∂–¥–∞—é—â–∏–π –º–∞–≥–∞–∑–∏–Ω": [
        "–≤–ø–µ—Ä–µ–¥–∏ –ª–∂–µ—Ü –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç",
        "—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–æ–ª–æ—Ç–æ",
        "–≤–ø–µ—Ä–µ–¥–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–æ–ª–æ—Ç–æ, –∏ —Ç–æ–≥–¥–∞ - —Ü–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç",
        "–≤–ø–µ—Ä–µ–¥–∏ —Ç–æ—Ä–≥–æ–≤–µ—Ü"
    ],
    "–†—É–∏–Ω—ã": [
        "—Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ",
        "–≤—ã–≥–ª—è–¥–∏—Ç –∑–Ω–∞–∫–æ–º—ã–º...",
        "–í–µ—Ä–æ—è—Ç–Ω–æ, —Ä—É–∏–Ω—ã",
        "–î–µ–π—Å—Ç–≤—É–π!"
    ],
    "–£–≥–æ–¥—å—è": [
        "–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Å—Ç–∞–¥–æ",
        "–¥–∞–ª—å–Ω–∏–π –±–æ–π –Ω–µ –ø–æ–º–æ–∂–µ—Ç?",
        "–≤–ø–µ—Ä–µ–¥–∏ —Å–æ–±–∞–∫–∞"
        "–≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Å–æ–Ω...",
        "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Å—Ç–∞–¥–æ"
    ],
    "–°—É–Ω–¥—É–∫": [
        "–≤–ø–µ—Ä–µ–¥–∏ —Ü–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç",
        "—Å–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, –∏ —Ç–æ–≥–¥–∞ - —Å—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–µ–º!",
        "–≤–ø–µ—Ä–µ–¥–∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞",
        "—É–∑—Ä–∏, —Ü–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç!",
        "–¥–∞ —Å–ª–∞–≤–∏—Ç—Å—è —Å—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–µ–º!",
        "—Å–æ–∫—Ä–æ–≤–∏—â–µ —è–≤–ª—è–µ—Ç—Å—è –≤ –≤–∏–¥–µ–Ω–∏—è—Ö...",
        "–ú–æ–∂–µ—Ç, —ç—Ç–æ –º–∏–º–∏–∫—Ä–∏—è?"
    ],
    "–ì–æ—Ä—à–æ–∫:": [
        "–ú–æ–∂–µ—Ç, —ç—Ç–æ –∑–æ–ª–æ—Ç–æ?",
        "–ù–µ —Å—é–¥–∞!",
        "–î–∞ —Å–ª–∞–≤–∏—Ç—Å—è –≥–æ—Ä—à–æ–∫!"
    ],
    "–ò—Å–ø—ã—Ç–∞–Ω–∏–µ": [
        "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ...",
        "–ë—É–¥—å —É –º–µ–Ω—è –∫–ª—é—á?",
        "–î–∞ —Å–ª–∞–≤–∏—Ç—Å—è –∫–ª—é—á!"
    ],
    "–¢—Ä–∏ –¥–≤–µ—Ä–∏": [
        "–°–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, –∏ —Ç–æ–≥–¥–∞ - —Å—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–µ–º!"
    ],
    "–ú—É–¥—Ä–µ—Ü": [
        "–¢—Ä–µ–±—É—é—Ç—Å—è –∑–Ω–∞–Ω–∏—è", 
        "–ü–æ–º–æ–≥–ª–∞ –±—ã –º–Ω–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ \"–ê–¥–º–æ–≤\"",
        "–¢—Ä–µ–±—É–µ—Ç—Å—è –º—É–¥—Ä–µ—Ü"
    ],
    "–í–µ–¥—å–º–∞": [
        "–í–ø–µ—Ä–µ–¥–∏ –±–æ–ª–æ—Ç–∏—Å—Ç–∞—è –º–µ—Å—Ç–Ω–æ—Å—Ç—å", 
        "–í–ø–µ—Ä–µ–¥–∏ —Ç—Ä–∞–≤–Ω–∏–∫",
        "–ù—É–∂–Ω–æ –ø—Ä–æ—Ç–∏–≤–æ—è–¥–∏–µ!?",
        "–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±–æ—è—Ç—å—Å—è",
    ],
    "–ö–≤–∞–¥—Ä–∞—Ç —Ä—É–Ω": [
        "–ì–µ–Ω–∏–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –¥—Ä–µ–≤–Ω–∏—Ö"
    ],
    
    "–í—Ä–∞–≥": [
        "–í–ø–µ—Ä–µ–¥–∏ –∑–∞—Å–∞–¥–∞",
        "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Å–≤–µ—Ä—Ö—É",
        "–í–ø–µ—Ä–µ–¥–∏ –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∏–∑ –∑–∞—Å–∞–¥—ã",
        "–í–ø–µ—Ä–µ–¥–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—Ç–∞–∫–∞",
        "–ü–æ—á–µ–º—É –æ–ø—è—Ç—å –≤—Ä–∞–≥?",
        "–ê—Ç–∞–∫–∞ –Ω–µ –ø–æ–º–æ–∂–µ—Ç?",
        "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ",
        "–°–ª–∞–±—ã–π –≤—Ä–∞–≥? –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ...",
        "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–º–∞–Ω–∏–≤–∞–Ω–∏–µ",
        "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∑—è—Ç—å—Å—è –∑–∞ –≤—Å–µ—Ö —Å—Ä–∞–∑—É",
        "–°–ª–∞–±—ã–π –≤—Ä–∞–≥, –æ —Å–ª–∞–±—ã–π –≤—Ä–∞–≥",
        "–û—Ç–¥—ã—Ö –ø–æ–∫–∞ –Ω–µ –∑–¥–µ—Å—å‚Ä¶",
        "–ë–ª–∏–∂–Ω–∏–π –±–æ–π —è–≤–ª—è–µ—Ç—Å—è –≤ –≤–∏–¥–µ–Ω–∏—è—Ö‚Ä¶"
    ]
    
}
Books = {
    "–ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç –æ–Ω –º–∏–ª–æ—Å—Ç—å –≤ –±–∏—á, –∞ –º–æ–ª–∏—Ç–≤—É –≤ –ø–æ–≥–∏–±–µ–ª—å": "–ï—Ä–µ—Ç–∏–∫",
    "—Ç–æ–ª—å–∫–æ –∏–∑–±—ã—Ç–æ–∫ —Å–∏–ª —Å–º–æ–∂–µ—Ç –∑–∞—â–∏—Ç–∏—Ç—å": "–ë–∞—Ä—å–µ—Ä",
    "...–≤ —Å–æ—á–ª–µ–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–ª–∞—Å—Ç–∏–Ω–∞–º–∏, –∏ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –æ–Ω–∏...": "–†–∞—Å–∫–æ–ª",
    "—Ç–æ–ª—å–∫–æ –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, —Å–≤–æ–±–æ–¥–Ω–æ–π –æ—Ç –æ—Ä—É–∂–∏—è —Ä—É–∫–æ–π, –≤ –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω—É—é –∑–æ–Ω—É": "–ì—Ä—è–∑–Ω—ã–π —É–¥–∞—Ä",
    "—ç—Ç–∏ –±–æ–π—Ü—ã –Ω–µ –Ω–æ—Å–∏–ª–∏, –æ–¥–Ω–∞–∫–æ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–ª–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –∞–≥—Ä–µ—Å—Å–∏–∏ –≤ –±–æ—é, –∏–º–µ—è": "–ì–ª–∞–¥–∏–∞—Ç–æ—Ä",
    "–¥–∞–∂–µ, –∫–∞–∑–∞–ª–æ—Å—å –±—ã, –≤—Å–µ–≥–æ –æ–¥–Ω–æ —É–º–µ–Ω–∏–µ, –Ω–æ –∏–º–µ–Ω–Ω–æ –æ–Ω–æ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Å–µ—Ä—å–µ–∑–Ω—ã–º –∫–æ–∑—ã—Ä–µ–º": "–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å",
    "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–æ–±—ã–µ –ø–ª–∞—Å—Ç–∏–Ω—ã –≤ –¥–æ—Å–ø–µ—Ö–µ, —á—Ç–æ–±—ã –ø—Ä–∏–∫—Ä—ã—Ç—å —ç—Ç–∏ –º–µ—Å—Ç–∞": "–ü—Ä–æ—á–Ω–æ—Å—Ç—å ",
    "—Å–∞–º–æ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏–∑ –Ω–∏—Ö, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –æ—Å–ª–∞–±–∏—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –ø—Ä—è–º–æ –≤–æ –≤—Ä–µ–º—è": "–ü—Ä–æ–∫–ª—è—Ç–∏–µ —Ç—å–º—ã",
    "–Ω–µ –±—Ä–µ–∑–≥–æ–≤–∞—Ç—å –æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∂–¥—ã–π –∫–∞—Ä–º–∞–Ω, –¥–∞–∂–µ –µ—Å–ª–∏ —Å –ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞ –∫–∞–∂–µ—Ç—Å—è,—á—Ç–æ": "–ú–∞—Ä–æ–¥–µ—Ä",
    "–æ–±–∏—Ç–∞—é—Ç –±–ª–∏–∂–µ –∫–æ –¥–Ω—É, —á–∞—â–µ —Å–∫—Ä—ã–≤–∞—è—Å—å –≤ –≤–æ–¥–æ—Ä–æ—Å–ª—è—Ö": "–†—ã–±–∞–∫",
    "–∏—Å—Ç–∏–Ω–Ω—ã–π –ø—É—Ç—å, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–µ—è–Ω–∏–π –∏ –ø–æ—Å—Ç—É–ø–∫–æ–≤": "–í–æ–∑–¥–∞—è–Ω–∏–µ",
    "–±–æ–ª–µ–µ –≤–∞–∂–µ–Ω —Ä–∞–∑–º–∞—Ö, –∫–æ—Ç–æ—Ä—ã–π —É—Å–∏–ª–∏—Ç —Ç—è–∂–µ—Å—Ç—å —É–¥–∞—Ä–∞ –∏ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–æ–±–∏—Ç—å": "–î—Ä–æ–±—è—â–∏–π —É–¥–∞—Ä",
    "–≤—ã—Å–ª–µ–¥–∏—Ç—å –∏—Ö –º–æ–∂–Ω–æ –ø–æ –æ—Å–æ–±—ã–º –º–∞–≥–∏—á–µ—Å–∫–∏–º –∑–Ω–∞–∫–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç —Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏": "–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –≥–æ–ª–æ–≤–∞–º–∏",
    "–≥–ª–∞–≤–Ω–æ–µ - —Ç–æ—á–Ω–æ —Å–æ–±–ª—é–¥–∞—Ç—å –≤—Ä–µ–º—è –º–µ–∂–¥—É –Ω–∏–º–∏, –∏ —Ç–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ": "–†–∞—Å—á—ë—Ç–ª–∏–≤–æ—Å—Ç—å",
    "–ø–æ–º–æ–∂–µ—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Ä–µ–º—è –ø—Ä–∏ –ø–µ—Ä–µ–≤—è–∑–∫–µ, —É–º–µ–Ω—å—à–∏–≤": "–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ",
    "–µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ–±–æ–ª—å—à–∏–µ - –∑–∞—Ç—è–Ω—É—Ç—Å—è —Å–∞–º–∏ —Å–æ–±–æ–π, –¥–∞–∂–µ –≤ –±–æ—é, –Ω–µ —Ç—Ä–µ–±—É—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ª–µ—á–µ–Ω–∏—è": "–†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è",
    "—Ç–∞–∫—É—é –ø–æ–∑—É, –∫–æ—Ç–æ—Ä–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—á–µ—Ä–∫–Ω–µ—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç—å": "–£—Å—Ç—Ä–∞—à–µ–Ω–∏–µ",
    "–ø–∞–¥–∞–ª, –Ω–æ —Å–Ω–æ–≤–∞ –≤—Å—Ç–∞–≤–∞–ª, –ø—Ä–æ–¥–æ–ª–∂–∞—è –ø—É—Ç—å –∫ —Å–≤–æ–µ–π —Ü–µ–ª–∏": "–£–ø–æ—Ä–Ω–æ—Å—Ç—å",
    "–Ω–µ —Å—Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞ –ø–æ—Ä–µ–∑–∞, —Å–∫–æ–ª—å–∫–æ –µ–≥–æ –≥–ª—É–±–∏–Ω–∞": "–ö—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ",
    "—Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–µ - –º–æ–∂–µ—Ç —Å–ø–∞—Å—Ç–∏ –∂–∏–∑–Ω—å –æ—Ç –ª—é–±–æ–≥–æ, –¥–∞–∂–µ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ–≥–æ —É–¥–∞—Ä–∞": "–ü–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å",
    "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∞–∫–µ–ª –¥–∞–∂–µ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤–æ–∫—Ä—É–≥ –Ω–µ—Ç –Ω–∏ –µ–¥–∏–Ω–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞": "–û–≥–æ–Ω–µ–∫ –Ω–∞–¥–µ–∂–¥—ã",
    "–∏–Ω–æ–≥–¥–∞ –≤–∞–∂–Ω–µ–µ,—á–µ–º –∞—Ç–∞–∫–∞.–ü–µ—Ä–µ–∂–¥–∞–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–¥–∞—Ä–æ–≤, –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å": "–ó–∞—â–∏—Ç–Ω–∞—è —Å—Ç–æ–π–∫–∞",
    "–Ω–æ –Ω–µ —Å—Ç–æ–∏—Ç —Å—Ç—Ä–∞—à–∏—Ç—å—Å—è - –≤–µ–¥—å –í–∞–º, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –æ–Ω –Ω–µ –ø—Ä–∏—á–∏–Ω–∏—Ç –≤—Ä–µ–¥–∞, –∞ –Ω–∞–æ–±–æ—Ä–æ—Ç": "–¶–µ–ª–µ–±–Ω—ã–π –æ–≥–æ–Ω—å",
    "–µ—Å–ª–∏ —Å–≤—è–∑—ã–≤–∞—Ç—å –∏—Ö –≤ –æ–¥–Ω—É –æ—Ö–∞–ø–∫—É, —Ç–æ –æ–Ω–∏ –∑–∞–π–º—É—Ç –º–µ–Ω—å—à–µ –º–µ—Å—Ç–∞ –≤": "–ó–∞–ø–∞—Å–ª–∏–≤–æ—Å—Ç—å",
    "–ø—É—Å—Ç—å —ç—Ç–∏ –ø—Ä–∏–º–µ—Ç—ã –∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –ø–æ–ª–µ–∑–Ω—ã,": "–°—É–µ–≤–µ—Ä–Ω–æ—Å—Ç—å",
    "–ø—Ä—è–º–æ–π —É–¥–∞—Ä –æ—Å—Ç—Ä–∏–µ–º –≤–ø–µ—Ä–µ–¥.": "–ö–æ–ª—é—â–∏–π —É–¥–∞—Ä",
    "–≥—Ä—è–∑—å –ø–æ–¥ –Ω–æ–≥–∞–º–∏, –∫–∞–∫ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç. –¶–µ–ª—å—Ç–µ—Å—å –≤ –≥–ª–∞–∑–∞, —á—Ç–æ–±—ã": "–°–ª–µ–ø–æ—Ç–∞",
    "–ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–æ –æ—Ç–∫—É–ø–æ—Ä–∏—Ç—å –∫—Ä—ã—à–∫—É –∏ –æ–¥–Ω–∏–º –≥–ª–æ—Ç–∫–æ–º –æ—Å—É—à–∏—Ç—å": "–í–æ–¥–æ—Ö–ª–µ–±",
    "–Ω–∞–Ω–µ—Å—Ç–∏ —É–¥–∞—Ä –≤–¥–æ–ª—å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–±–ª–∏–∑–∏–≤—à–∏—Å—å —Å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–º, —á—Ç–æ–±—ã –æ–Ω —Ç–æ—á–Ω–æ –Ω–µ —Å–º–æ–≥": "–†–µ–∂—É—â–∏–π —É–¥–∞—Ä",
    "—Å–ª–µ–¥–∏—Ç—å –∑–∞ –∫–∞–∂–¥—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –≤—Ä–∞–≥–æ–º, –º–µ–Ω—å—à–µ –æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–µ": "–ë–µ—Å—Å—Ç—Ä–∞—à–∏–µ",
    "–æ—Ç—Ä–µ—à–∏–≤—à–∏—Å—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞, –æ–¥–Ω–∞–∫–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –Ω–∞–¥–µ–π—Ç–µ—Å—å –∏–∑–±–µ–∂–∞—Ç—å": "–°—Ç–æ–π–∫–∞ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∏—è",
    "—Ä–µ–∑–∫–∏–º –≤–∑–º–∞—Ö–æ–º, –µ–¥–≤–∞ –∑–∞–¥–µ–≤–∞—è —Å–∞–º—ã–º –æ—Å—Ç—Ä–∏–µ–º –ø–æ —à–∏—Ä–æ–∫–æ–º—É": "–†–∞—Å—Å–µ—á–µ–Ω–∏–µ",
    "–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ, –º–Ω–æ–≥–∏—Ö –∏–∑ –Ω–∏—Ö –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ –ø—Ä–æ—Å—Ç–æ": "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",
    "–ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤ —Å–∞–º—É –∫—Ä–æ–≤—å –≤—Ä–∞–≥–∞, –æ—Ç—Ä–∞–≤–ª—è—è –µ–µ –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è—è": "–ó–∞—Ä–∞–∂–µ–Ω–∏–µ",
    "—É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–æ–∫—Ä—É–≥ –Ω–µ—Ç –Ω–∏ –µ–¥–∏–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞, –∏ —Å–æ–±—Ä–∞—Ç—å –≤–æ–∫—Ä—É–≥": "–°–∏–ª–∞ —Ç–µ–Ω–µ–π",
    "–ø–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è –∏–∑ –ø–µ–ø–ª–∞, –Ω–æ —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏": "–§–µ–Ω–∏–∫—Å",
    "–±—É–¥–µ—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏, –∏ —É–∂–µ –Ω–µ –º–æ–∂–µ—Ç": "–†–∞—Å–ø—Ä–∞–≤–∞",
    "–Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è—è —Å–≤–æ–∏ —Å–ª–∞–±—ã–µ —Ç–æ—á–∫–∏ –ø–æ–¥ –≤–µ—Ä–æ—è—Ç–Ω—É—é —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é": "–ù–µ—É—è–∑–≤–∏–º—ã–π",
    "–∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Å–∏–ª—ã –≤–æ–∫—Ä—É–≥ —Å–µ–±—è –∏ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –ø–æ—Ç–æ–∫ –≤ —Å–≤–æ–µ —Ç–µ–ª–æ": "–°–ª–∞–±–æ–µ –∏—Å—Ü–µ–ª–µ–Ω–∏–µ",
    "–Ω–µ —Ç–æ–ª—å–∫–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Å–µ–º, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏–º –≤–æ–∫—Ä—É–≥, –Ω–æ –∏ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞—Ä–º–∞–Ω–∞—Ö": "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
    "–≤—Å—é –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—É—é –∑–∞ —ç—Ç–æ –≤—Ä–µ–º—è —Å–∏–ª—É –≤—ã—Å–≤–æ–±–æ–¥–∏—Ç—å –≤": "–ú–æ—â–Ω—ã–π —É–¥–∞—Ä",
    "–∏ –∫—Ä–æ–≤—å, –∑–∞–ª–∏–≤–∞—é—â–∞—è –≥–ª–∞–∑–∞, –ø—Ä–∏–¥–∞—Å—Ç —Å–∏–ª—ã –∏ —è—Ä–æ—Å—Ç–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ": "–ë–µ—Ä—Å–µ—Ä–∫–µ—Ä",
    "–æ—á–∏—Å—Ç–∏—Ç—å —Ä–∞–∑—É–º –æ—Ç –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –º—ã—Å–ª–µ–π, —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–≤—à–∏—Å—å –Ω–∞": "–ù–µ–ø–æ–∫–æ–ª–µ–±–∏–º—ã–π",
    "–≤–æ–Ω–∑–∏—Ç—å –≤ –ø–ª–æ—Ç—å, –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω—É—é –±—Ä–æ–Ω–µ–π. –õ—É—á—à–µ–π —Ç–æ—á–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è —à–µ—è, –µ—Å–ª–∏": "–£–¥–∞—Ä –≤–∞–º–ø–∏—Ä–∞",
    "—Ä–µ–∑–∫–∏–π –∏ –≥—Ä–æ–º–∫–∏–π –∑–≤—É–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±—å–µ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞": "–û—à–µ–ª–æ–º–ª–µ–Ω–∏–µ",
    "–ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–µ–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å –∫–∞–º–Ω–∏, —Ä–∞–∑–±–∏—Ä–∞—è –æ–±–≤–∞–ª–∏–≤—à–∏–π—Å—è —É—á–∞—Å—Ç–æ–∫": "–†–∞—Å—Ç–æ—Ä–æ–ø–Ω–æ—Å—Ç—å ",
    "–≤—Å–µ–≥–¥–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞—Ö–æ–¥–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∏–¥–Ω–∞ —Å—Ä–∞–∑—É, –∏–Ω–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è": "–°–æ–±–∏—Ä–∞—Ç–µ–ª—å",
    "–µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ —É–¥–∞—Ä –ø—Ä—è–º–æ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç, —Ç–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ —É—Å–ø–µ–µ—Ç": "–ö–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∞",
    "—Å–ø–∞—Å–∏—Ç–µ–ª—å–Ω–æ–π –∂–∏–¥–∫–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä–∞—è, –∏–Ω–æ–≥–¥–∞, —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ–∑–Ω–µ–µ –ª—é–±–æ–≥–æ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è": "–í–µ–¥—å–º–∞–∫",
    "–≤–ø–∏—Ç—ã–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏, —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É—è —Å–≤–æ–∏": "–£—á–µ–Ω–∏–∫",
    "–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ—Å, –ø—Ä–∏–¥–∞—é—â–∏–π —Å–∏–ª—É —É–¥–∞—Ä–∞ –≤–º–µ—Å—Ç–µ —Å —Ä–∞–∑–≥–æ–Ω–æ–º": "–¢–∞—Ä–∞–Ω",
    "—Ä–∞–∑—Ä–µ–∑–∞—Ç—å –≤–¥–æ–ª—å, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–æ–¥–¥–µ–≤ –Ω–æ–∂–æ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —á–∞—Å—Ç—å": "–ë—Ä–∞–∫–æ–Ω—å–µ—Ä",
    "–∑–∞—Ä–∏—Å–æ–≤–∞—Ç—å –Ω–∞ –±—É–º–∞–≥–µ, –∫–∞–∂–¥—ã–π –ø–æ–≤–æ—Ä–æ—Ç, –∫–∞–∂–¥—É—é": "–ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ",
    "–≤—ã–≤–µ—Ä–µ–Ω–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—Ç —Å–Ω—è—Ç—å –ø—Ä–æ–±–∫—É –±—ã—Å—Ç—Ä–µ–µ –∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å": "–õ–æ–≤–∫–æ—Å—Ç—å —Ä—É–∫",
    "–Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π –∫–ª–∏–Ω–æ–∫ –ø–æ–¥ —É–¥–∞—Ä, –æ—Ç–≤–µ–¥—è": "–ü–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ",
    "¬´...–ø—Ä–∏–≥–Ω—É–≤—à–∏—Å—å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º—è–≥–∫–æ —Å—Ç—É–ø–∞—è –ø–æ –∫–∞–º–µ–Ω–Ω–æ–º—É...¬ª": "–ù–µ–∑–∞–º–µ—Ç–Ω–æ—Å—Ç—å",
    "–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—è –º—ã—à—Ü—ã, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–ª–∏—Ç—å –∏–º": "–ê—Ç–ª–µ—Ç–∏–∫–∞",
    "–∏–º–º—É–Ω–∏—Ç–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–º–∞, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ —Å–º–æ–∂–µ—Ç": "–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å",
    "...—Å–∞–º–∞ –ø–æ —Å–µ–±–µ, –æ–¥–Ω–∞–∫–æ —Ç–∞–π–Ω—ã–µ –∑–Ω–∞–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤...": "–ó–Ω–∞–Ω–∏—è –¥—Ä–µ–≤–Ω–∏—Ö",
    "–∑–∞—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –ø—Ä–∏–∑–≤–∞—Ç—å –∏—Ö –¥–ª—è –ø–æ–º–æ—â–∏ –≤.": "–£–≥—Ä–æ–∑–∞",
}
TestDoor = {
    "–Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤–∏–¥–Ω–µ–µ—Ç—Å—è –ø–æ–ª—É—Å—Ç–µ—Ä—Ç–∞—è –Ω–∞–¥–ø–∏—Å—å –Ω–∞ –¥—Ä–µ–≤–Ω–µ–º —è–∑—ã–∫–µ: ": "–ì—Ä–æ–±–Ω–∏—Ü–∞ –í–µ–∫–æ–≤",
    "–ø–æ–ª–æ–Ω –≤–æ–ª—à–µ–±—Å—Ç–≤–∞, –Ω–æ –∫–∞–∫—É—é –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö": "–£–π—Ç–∏",
    " —Å–ø—É—Å–∫ –Ω–∞ –ø—É—Ç—å –∫ –°–µ—Ä–¥—Ü—É": "–¢–µ–º–Ω–æ–ª–µ—Å—å–µ",
    "–ö–ê–ö–û–í –¶–í–ï–¢ –°–ï–†–î–¶–ê?": "–§–∏–æ–ª–µ—Ç–æ–≤—ã–π",
    "–í –≥—Ä—É–¥–∏ –º–æ–µ–π –≥–æ—Ä–µ–ª –ø–æ–∂–∞—Ä, –Ω–æ —Å–∂–µ–≥ –º–µ–Ω—è –¥–æ—Ç–ª–∞. –¢—ã –∏–º—è –Ω–∞–∑–æ–≤–∏ –º–æ–µ, –∏ –ø–æ–ª—É—á–∏": "–†–æ–∑–∞",
    "–ö–∞–∂–¥–∞—è —Å–∫—É–ª—å–ø—Ç—É—Ä–∞ –ø—Ä–æ—Ç—è–≥–∏–≤–∞–µ—Ç –≤–ø–µ—Ä–µ–¥ —Ä—É–∫—É –ª–∞–¥–æ–Ω—å—é –≤–≤–µ—Ä—Ö, –∞ –Ω–∞ —Å—É–Ω–¥—É–∫–µ-–∞–ª—Ç–∞—Ä–µ –≤ —Ü–µ–Ω—Ç—Ä–µ –ª–µ–∂–∏—Ç –º–∞–ª–µ–Ω—å–∫–∏–π –∫–∞–º–µ–Ω—å, –∏–∑–æ–±—Ä–∞–∂–∞—é—â–∏–π —Ç—Ä–µ—Å–Ω—É—Ç–æ–µ –°–µ—Ä–¥—Ü–µ –ì–ª—É–±–∏–Ω. –í–∏–¥–∏–º–æ, —ç—Ç–æ—Ç –∫–∞–º–µ–Ω—å": "–ß–µ–ª–æ–≤–µ–∫",
    " –ò–°–ü–û–õ–¨–ó–£–Æ–¢ –ó–ï–õ–¨–ï –ü–ê–ú–Ø–¢–ò, –ù–û –ü–û–ú–û–ì–ê–ï–¢ –õ–ò –û–ù–û –ù–ê –°–ê–ú–û–ú –î–ï–õ–ï?": "4",
    "4 —Ä—ã—á–∞–≥–∞ —Å –∏–º–µ–Ω–∞–º–∏ –ê–¥–º–æ–≤. –ù–∞ —Å—Ç–µ–Ω–µ –∑–∞ —Å—É–Ω–¥—É–∫–æ–º —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è 4 –±–∞—Ä–µ–ª—å–µ—Ñ–∞: –Ω–∞ –ø–µ—Ä–≤–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ –æ—Å–∞–¥–∞ –∫–∞–∫–æ–≥–æ-—Ç–æ –≥–æ—Ä–æ–¥–∞": ["–ì—Ä–∞—Ö", "–ï–≤–∞", "–¢—Ä–æ—Ä", "–°–º–æ—Ç—Ä–∏—Ç–µ–ª—å"],
    "—Å—Ç–æ–ª–∏–∫–µ, —Ä—è–¥–æ–º —Å —Å—É–Ω–¥—É–∫–æ–º, –ª–µ–∂–∏—Ç –∫–∞—Ä—Ç–∞ –º–∏—Ä–∞, –ø—Ä–∏—á–µ–º –Ω–∞—Å—Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä–∏–Ω–Ω–∞—è, —á—Ç–æ –Ω–∞ –Ω–µ–π –µ—â–µ –Ω–µ —Ä–∞–∑–º–µ—á–µ–Ω—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –í–µ–ª–∏–∫–∏—Ö –î–æ–º–æ–≤. –†—è–¥–æ–º –ª–µ–∂–∞—Ç 3 —Ñ–∏–≥—É—Ä–∫–∏ - —ç–ª—å—Ñ–∞, –æ—Ä–∫–∞ –∏ –≥–Ω–æ–º–∞. –í–∏–¥–∏–º–æ, –∏—Ö –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –ø–æ –∫–∞—Ä—Ç–µ, —á—Ç–æ–±—ã —Å—É–Ω–¥—É–∫": ["–°–µ–≤–µ—Ä–æ-–í–æ—Å—Ç–æ–∫", "–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥", "–Æ–≥ –º–∞—Ç–µ—Ä–∏–∫–∞"],
    "—Å—É–Ω–¥—É–∫–µ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã 3 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–µ—Ä—Ç—ã—Ö –∏–º–µ–Ω–∏ –∏—Å–∫–∞—Ç–µ–ª–µ–π –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π, –≤–ø–µ—Ä–≤—ã–µ –¥–æ–±—Ä–∞–≤—à–∏—Ö—Å—è –¥–æ –°–µ—Ä–¥—Ü–∞ –ì–ª—É–±–∏–Ω –∏ –≤—ã–∑–≤–∞–≤—à–∏—Ö –í—Ç–æ—Ä–æ–π –ö–∞—Ç–∞–∫–ª–∏–∑–º. –í–∏–¥–∏–º–æ, —ç—Ç–æ—Ç –∫–ª–∞–¥ –æ—Å—Ç–∞–≤–∏–ª–∏ –∏–º–µ–Ω–Ω–æ –æ–Ω–∏. –û—Å—Ç–∞–ª–æ—Å—å –≤—Å–ø–æ–º–Ω–∏—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å": ["–ì–µ—Ä", "–ù–∞—Ç–∞–Ω–∏—ç–ª—å", "–≠–º–±–µ—Ä"],
    "–ø–ª–∏—Ç–∞–º–∏ –≤–∏–¥–Ω–µ–µ—Ç—Å—è —Å—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏, –∞ –Ω–∞ —Å—Ç–µ–Ω–µ, –Ω–∞–¥ –Ω–∏–º, —Ç—Ä–∏ –∫–∞—Ä—Ç–∏–Ω—ã: –≥–æ–±–ª–∏–Ω, —à–∞–≥–∞—é—â–∏–π –Ω–∞ –∑–∞–ø–∞–¥ –æ—Ç –ª–∏—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞, —á–µ–ª–æ–≤–µ–∫, –±—Ä–µ–¥—É—â–∏–π –Ω–∞ –≤–æ—Å—Ç–æ–∫ –ø–æ –ø–æ–ª—é –∫–æ–ª–æ—Å—è—â–µ–π—Å—è –ø—à–µ–Ω–∏—Ü—ã, –∏ –æ—Ä–∫, —É—Ö–æ–¥—è—â–∏–π –≤–¥–∞–ª—å –æ—Ç —è—Ä–∫–æ –≥–æ—Ä—è—â–µ–≥–æ": ["–®–∞–≥–Ω—É—Ç—å –Ω–∞–ø—Ä–∞–≤–æ", "–ò–¥—Ç–∏ –≤–ø–µ—Ä–µ–¥", "–®–∞–≥–Ω—É—Ç—å –Ω–∞–ª–µ–≤–æ", "–ò–¥—Ç–∏ –≤–ø–µ—Ä–µ–¥"],
    "–ê–≥–æ...–∏—è, ...–µ—Ä—Ç—å, —Ä–æ–∂...–∏–µ, –∂–∏...—å": ["–û—Å–µ–Ω—å", "–ó–∏–º–∞", "–í–µ—Å–Ω–∞", "–õ–µ—Ç–æ"], 
    "–ò—Ç–∞–∫, –≥–ª–∞–≤–Ω—ã–º —Ä–µ–∞–≥–µ–Ω—Ç–æ–º –¥–æ–±–∞–≤–∏–º...": ["–ü–µ—â–µ—Ä–Ω—ã–π –∫–æ—Ä–µ–Ω—å", "–ü–µ—Ä–≤–æ–∑–¥–∞–Ω–Ω–∞—è –≤–æ–¥–∞", "–†—ã–±–∏–π –∂–∏—Ä"],
    "–í –±–æ—é –Ω—É–∂–Ω–∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–∏–ª–∞, –ª–æ–≤–∫–æ—Å—Ç—å –∏ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å, –Ω–æ –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç. –î–æ–∫–∞–∂–∏, —á—Ç–æ —Ç—ã —É–º–µ–µ—à—å –ø–æ–¥–±–∏—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥": ["–†–∞–∑—Ä–µ–∑–∞—Ç—å –º–µ—á–æ–º", "–£–¥–∞—Ä–∏—Ç—å –º–æ–ª–æ—Ç–æ–º", "–£–∫–æ–ª–æ—Ç—å –∫–∏–Ω–∂–∞–ª–æ–º"],
    

}
SageTest = {
"–ö–∞–∫–æ–≤–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–∞ –≤ PVP —Å—Ä–∞–∂–µ–Ω–∏–∏?": "40 —Å–µ–∫—É–Ω–¥",
"–ö–∞–∫–∞—è —Ñ—Ä–∞–∫—Ü–∏—è –±–æ–ª—å—à–µ –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –º–∞–≥–∏—é –ø—Ä–∏—Ä–æ–¥—ã?": "–≠–ª—å—Ñ—ã",
"–ö–Ω–∏–≥–∞ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ —É–º–µ–Ω–∏—è, –Ω–∏–≤–µ–ª–∏—Ä—É—é—â–µ–µ —É–º–µ–Ω–∏–µ –≥–æ–±–ª–∏–Ω–∞ - –≤–æ—Ä–∞ –∑–µ–ª–∏–π –ø—Ä–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –ø–æ–¥–∑–µ–º–µ–ª–∏–π:": "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
"–ë–æ–Ω—É—Å: \"–µ—Å–ª–∏ —É –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –º–µ–Ω—å—à–µ 10% HP –≤ –∫–æ–Ω—Ü–µ —Ö–æ–¥–∞, –Ω–æ –æ–Ω –µ—â–µ –∂–∏–≤ - —ç—Ç–æ—Ç –∫–ª–∞—Å—Å —Å 50% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –∫–∞–∑–Ω–∏—Ç –µ–≥–æ, –±–µ–∑ —à–∞–Ω—Å–∞ –Ω–∞ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É:": "–ü–∞–ª–∞—á",
"‚ù§Ô∏è–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –≤–ª–∏—è–µ—Ç –Ω–∞:": "–ó–∞–ø–∞—Å –∑–¥–æ—Ä–æ–≤—å—è",
"–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –±–µ–∑ —É—á—ë—Ç–∞ –æ—Å–æ–±–æ–≥–æ –Ω–∞–≤—ã–∫–∞ –∫–ª–∞—Å—Å–∞ \"–ë–µ—Ä—Å–µ—Ä–∫–µ—Ä\":": "95%",
"–ö–æ–º–∏—Å—Å–∏—è –ø—Ä–∏ –ª—é–±–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ –∑–∞ –∑–æ–ª–æ—Ç–æ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç:": "10%",
"–ö–∞–∫–æ–π –±–æ–≥ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∏—Ä –≤–æ–π–Ω—ã –∏ —Ö–∞–æ—Å?": "–ì—Ä–∞—Ö",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª–∞—Å—å —Å—Ç–æ–ª–∏—Ü–∞ –ö–∞–º–µ–Ω–Ω–æ–≥–æ –î–æ–º–∞?": "–ö–µ—Ç—Ä",
"–ß–µ–º –∑–∞–Ω–∏–º–∞–ª–∏—Å—å –ª—é–¥–∏ –¥–æ –í—Ç–æ—Ä–æ–≥–æ –ö–∞—Ç–∞–∫–ª–∏–∑–º–∞?": "–¢–æ—Ä–≥–æ–≤–ª—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è",
"–õ–∏–º–∏—Ç —É–∫–ª–æ–Ω–µ–Ω–∏—è –≤ –¢–µ–º–Ω–æ–ª–µ—Å—å–µ –±–µ–∑ –Ω–∞–ª–∏—á–∏—è \"–ü—Ä–∏–∑—Ä–∞—á–Ω–æ–≥–æ –¥–æ—Å–ø–µ—Ö–∞\":": "65%",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å \"–ø—Ä–æ–ø—É—Å–∫ —Ñ–∞–∑—ã –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏, –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø–æ–≥–ª–æ—â–µ–Ω–∏—è —É—Ä–æ–Ω–∞ –±—Ä–æ–Ω–µ–π –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –ø–æ–≥–ª–æ—â–µ–Ω–∏—è\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ç–æ–π–∫–µ:": "–ó–∞—â–∏—Ç–Ω–∞—è",
"–ö–∞–∫–∞—è —Ä–∞—Å–∞ –ª—É—á—à–µ –≤—Å–µ–≥–æ –≤–ª–∞–¥–µ–ª–∞ –∞–ª—Ö–∏–º–∏–µ–π –∏ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–µ–ª–∏–π?": "–ì–Ω–æ–º—ã",
"–ë–æ–Ω—É—Å \"—à–∞–Ω—Å 10% –Ω–∞ —Ç–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ —É–º–µ–Ω–∏–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–≤–∞–∂–¥—ã\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É:": "–•—Ä–∞–Ω–∏—Ç–µ–ª—å —Ç–∞–π–Ω",
"–ü–æ—á–µ–º—É –°–º–æ—Ç—Ä–∏—Ç–µ–ª—å –æ—Å—Ç–∞–ª—Å—è –≤ –ú–∏–¥-–ü–æ—Ä—Ç–µ?": "–ù–µ—Ç –≤–µ—Ä–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞",
"–ö–∞–∫–æ–π —Ä–∞—Å–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞–ª–∏ –ª—É—á—à–∏–µ –∫—É–∑–Ω–µ—Ü—ã –∏ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫–∏?": "–ì–Ω–æ–º—ã",
"–ö–µ–º —è–≤–ª—è–ª—Å—è –ì–µ—Ä?": "–í–æ–∏–Ω–æ–º",
"–ö–∞–∫–∞—è —Ä–∞—Å–∞ –Ω–∞—Å–µ–ª—è–ª–∞ –î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –î–æ–º?": "–≠–ª—å—Ñ—ã",
"–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤–∞–Ω—Ç—é—Ä–∏—Å—Ç, –≤—ã–±—Ä–∞–≤—à–∏–π—Å—è –Ω–∞–≤–µ—Ä—Ö –ø–æ—Å–ª–µ –≤—Å—Ç—Ä–µ—á–∏ —Å \"–°–µ—Ä–¥—Ü–µ–º –ì–ª—É–±–∏–Ω\":": "–ì–µ—Ä",
"üñê–õ–æ–≤–∫–æ—Å—Ç—å –≤–ª–∏—è–µ—Ç –Ω–∞:": "–¢–æ—á–Ω–æ—Å—Ç—å –∏ —É–∫–ª–æ–Ω–µ–Ω–∏–µ",
"–ö—Ç–æ –∏–∑ –±–æ–≥–æ–≤ –ø–µ—Ä–≤—ã–º –ø—Ä–µ–¥–ª–æ–∂–∏–ª —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –º–µ–∂–¥—É —Ä–∞—Å–∞–º–∏?": "–°–º–æ—Ç—Ä–∏—Ç–µ–ª—å",
"–ë–æ–Ω—É—Å: \"–∏–º–µ–µ—Ç —à–∞–Ω—Å 10%, —á—Ç–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É—Ä–æ–Ω –æ—Ç –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏ –æ—Ç—Ä–∞–∑–∏—Ç—Å—è –≤ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É:": "–ü–∞–ª–∞–¥–∏–Ω",
"–ö—Ç–æ –ø–µ—Ä–≤—ã–º –ø—Ä–µ–¥–ª–æ–∂–∏–ª —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∏ –∞–ª—å—è–Ω—Å–∞?": "–°–º–æ—Ç—Ä–∏—Ç–µ–ª—å",
"–ö–∞–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–µ–ª–∏–π –ø—Ä–∏ —Å—Ä–∞–∂–µ–Ω–∏–∏ –≤ PVP?": "–£–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤ 2 —Ä–∞–∑–∞",
"–ö–µ–º —è–≤–ª—è–ª–∞—Å—å –≠–º–±–µ—Ä?": "–ú–∞–≥–æ–º",
"–ë–æ–Ω—É—Å \"+20% –∫ –ø–æ–ª—É—á–∞–µ–º–æ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –û—Ä–¥–µ–Ω–∞\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ:": "–ß–µ–ª–æ–≤–µ–∫",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª—Å—è –≥–ª–∞–≤–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —É–∑–µ–ª –ª—é–¥–µ–π?": "–ú–∏–¥-–ü–æ—Ä—Ç",
"–ö–∞–∫–æ–≤–∞ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫—É–ø–æ–Ω–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–ª—å–¥–∏–∏?": "5000 –æ—Å–∫–æ–ª–∫–æ–≤",
"–ö–∞–∫ –∑–≤–∞–ª–∏ —Ç—Ä–æ–∏—Ö –≤—ã–∂–∏–≤—à–∏—Ö –≤ —ç–∫—Å–ø–µ–¥–∏—Ü–∏–∏ –∫ –°–µ—Ä–¥—Ü—É –ì–ª—É–±–∏–Ω?": "–≠–º–±–µ—Ä, –ì–µ—Ä, –ù–∞—Ç–∞–Ω–∏—ç–ª—å",
"–í –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ —É—Ä–æ–≤–Ω—è –≤—Å–µ–≥–¥–∞ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç—Å—è:": "1% —Å—ã—Ç–æ—Å—Ç–∏",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å \"–ø–æ–≤—ã—à–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±—Ä–æ—Å–∞ —É—Ä–æ–Ω–∞ –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏, —Å–Ω–∏–∂–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ç–æ–π–∫–µ:": "–ö–æ–ª—é—â–∞—è",
"üçÄ–£–¥–∞—á–∞ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞:": "–¢–æ—á–Ω–æ—Å—Ç—å –∏ —É–∫–ª–æ–Ω–µ–Ω–∏–µ",
"–° –∫–∞–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏–≥—Ä–æ–∫–∞–º –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Ö–æ–¥ –Ω–∞ –≠–ª–∏—Ç–Ω—É—é –∞—Ä–µ–Ω—É?": "50",
"–ö—Ç–æ –ø–µ—Ä–≤—ã–º –Ω–∞—à–µ–ª –ø—É—Ç—å –≤ –ø–æ–¥–∑–µ–º–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –≥–Ω–æ–º–æ–≤": "–õ—é–¥–∏",
"–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:": "–í –∫–æ–Ω—Ü–µ —Ö–æ–¥–∞",
"–ö–µ–º —è–≤–ª—è–ª—Å—è –ù–∞—Ç–∞–Ω–∏—ç–ª—å?": "–†–∞–∑–±–æ–π–Ω–∏–∫–æ–º",
"–®–∞–Ω—Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∑–µ–ª—å—è –Ω–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (–±—Ä–æ—Å–æ–∫) –±–∞–∑–æ–≤–æ —Ä–∞–≤–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç—É:": "–¢–æ—á–Ω–æ—Å—Ç–∏",
"–í —á–µ–º –±—ã–ª–∞ –≥–ª–∞–≤–Ω–∞—è –≤–æ–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≥–Ω–æ–º–æ–≤?": "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
"–ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º ‚úß ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è:": "–ü–æ–≥–ª–æ—â–∞–µ—Ç—Å—è –±—Ä–æ–Ω–µ–π",
"–ö–∞–∫–∞—è –∏–∑ —Ä–∞—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —à–∞–º–∞–Ω–æ–≤ –≤ –±–æ—é?": "–û—Ä–∫–∏",
"–ö–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–º–µ–Ω–∏–π –∏–º–µ–µ—Ç –±–∞–∑–æ–≤–æ –∫–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫?": "2",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª–æ—Å—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫—Ä—É–ø–Ω–æ–µ –ø–æ—Å–µ–ª–µ–Ω–∏–µ –≤ –î–æ–ª–∏–Ω–µ –°–º–µ—Ä—Ç–∏?": "–û–≥–Ω–∏–π",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª—Å—è –º–∞–≥–∏—á–µ—Å–∫–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª, –ø—Ä–æ–±—É–∂–¥–µ–Ω–Ω—ã–π –ª—é–¥—å–º–∏?": "–°–µ—Ä–¥—Ü–µ –ì–ª—É–±–∏–Ω",
"–ë–æ–Ω—É—Å \"-50% –æ—Ç–∫–∞—Ç —É–º–µ–Ω–∏–π –≤ –Ω–∞—á–∞–ª–µ –±–æ—è -1\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É:": "–ú–∏—Å—Ç–∏–∫",
"\"–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä\" –º–æ–∂–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –≤—ã–ø–∞–≤—à–µ–º —Ä–∞–∑–±—Ä–æ—Å–µ —É—Ä–æ–Ω–∞ –±–æ–ª–µ–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ–º:": "15%",
"–ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ \"–°–µ—Ä–¥—Ü–µ –ì–ª—É–±–∏–Ω\"?": "–°–∏–ª—É –ê–¥–º–æ–≤",
"–ö—Ç–æ –ø–µ—Ä–≤—ã–º –Ω–∞—á–∞–ª –í—Ç–æ—Ä–æ–π –ö–∞—Ç–∞–∫–ª–∏–∑–º?": "–õ—é–¥–∏",
"–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤–æ –≤—Ä–µ–º—è –ü–µ—Ä–≤–æ–≥–æ –ö–∞—Ç–∞–∫–ª–∏–∑–º–∞?": "–£—à–ª–∏ –ê–¥–º—ã",
"–ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º ‚ú¶ ‚Äî —á–∏—Å—Ç–æ–≥–æ —É—Ä–æ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è:": "–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –±—Ä–æ–Ω—é",
"üëû–®–∞–Ω—Å —É–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç –∞—Ç–∞–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –±–µ–∑ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ \"–ü—Ä–∏–∑—Ä–∞—á–Ω–æ–≥–æ –¥–æ—Å–ø–µ—Ö–∞\" –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å:": "65%",
"–ö–∞–∫—É—é —Ç–∞–∫—Ç–∏–∫—É —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç–ª—å—Ñ—ã –≤ –±–æ—é?": "–ó–∞—Å–∞–¥—ã",
"–ë–æ–Ω—É—Å: \"+5% —à–∞–Ω—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–Ω –æ—Ç –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ:": "–ì–Ω–æ–º",
"–¢—Ä–∞–≤–º—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑:": "8 —á–∞—Å–æ–≤",
"–°–∏–ª–∞ —Ç–µ–Ω–µ–π –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω, –∑–∞–≤–∏—Å—è—â–∏–π –æ—Ç:": "–£—Ä–æ–≤–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å \"–ø–æ–≤—ã—à–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏, —Å–Ω–∏–∂–µ–Ω–∏–µ —à–∞–Ω—Å–∞ —É–∫–ª–æ–Ω–µ–Ω–∏—è –¥–æ –Ω—É–ª—è\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ç–æ–π–∫–µ:": "–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∏—è",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª–∏—Å—å –≤–æ–π–Ω—ã –º–µ–∂–¥—É —Ç—Ä–µ–º—è –∞–ª—å—è–Ω—Å–∞–º–∏ –¥–æ –í—Ç–æ—Ä–æ–≥–æ –ö–∞—Ç–∞–∫–ª–∏–∑–º–∞?": "–í–µ—á–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç",
"–ü–æ—á–µ–º—É –æ—Ä–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç—è–∂–µ–ª—É—é –±—Ä–æ–Ω—é?": "–ú–µ—à–∞–ª–æ —Ç–∞–∫—Ç–∏–∫–µ",
"–ë–æ–Ω—É—Å \"+20% –∫ –ø–æ–ª—É—á–∞–µ–º–æ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –û—Ö–æ—Ç–Ω–∏–∫–æ–≤\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ:": "–≠–ª—å—Ñ",
"–ö—Ç–æ –∏–ª–∏ —á—Ç–æ –ø–æ—Å–ª—É–∂–∏–ª–æ –ø—Ä–∏—á–∏–Ω–æ–π —Ç–æ–º—É, —á—Ç–æ –∞–ª—å—è–Ω—Å—ã –Ω–µ –º–æ–≥–ª–∏ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –ú–∏–¥-–ø–æ—Ä—Ç?": "–ê–ª—å—è–Ω—Å—ã-–∑–∞—â–∏—Ç–Ω–∏–∫–∏",
"–ö–∞–∫–æ–≤–∞ –±—ã–ª–∞ –≥–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –≤–æ–π–Ω—ã –º–µ–∂–¥—É –æ—Ä–∫–∞–º–∏ –∏ —ç–ª—å—Ñ–∞–º–∏?": "–î–æ–ª–∏–Ω–∞ –°–º–µ—Ä—Ç–∏",
"–ß—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π \"–°–µ—Ä–¥—Ü–µ –ì–ª—É–±–∏–Ω\"?": "–û–≥—Ä–æ–º–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª–∏—Å—å –º–æ–Ω—Å—Ç—Ä—ã, –ø–æ—è–≤–∏–≤—à–∏–µ—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –°–µ—Ä–¥—Ü–∞ –ì–ª—É–±–∏–Ω?": "–¢–≤–∞—Ä–∏ –∏–∑ –≥–ª—É–±–∏–Ω",
"–ü—Ä–∏—á–∏–Ω–∞, –ø–æ—á–µ–º—É —ç–ª—å—Ñ—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç—è–∂–µ–ª—ã–µ –¥–æ—Å–ø–µ—Ö–∏?": "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å –∏ —Å–∫–æ—Ä–æ—Å—Ç—å",
"üëä–°–∏–ª–∞ –≤–ª–∏—è–µ—Ç –Ω–∞:": "–£—Ä–æ–Ω –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏",
"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—Ç–æ–≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–µ—Ç –ø—Ä–µ–¥–º–µ—Ç \"–ë–µ–∑–¥–æ–Ω–Ω—ã–π –º–µ—à–æ–∫ –ê–¥–º–æ–≤\":": "100",
"–ö–∞–∫–æ–µ –ø–∞—Å—Å–∏–≤–Ω–æ–µ —É–º–µ–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ç—Ä–æ—Ñ–µ–∏ –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–±—ã—á–µ?": "–ú–∞—Ä–æ–¥–µ—Ä",
"–ë–æ–Ω—É—Å \"+33% —à–∞–Ω—Å –≤—ã–∂–∏—Ç—å —Å 1 HP –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ–≥–æ —É–¥–∞—Ä–∞\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ:": "–ù–µ–∂–∏—Ç—å",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å \"—Å–Ω–∏–∂–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±—Ä–æ—Å–∞ —É—Ä–æ–Ω–∞ –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏, –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ç–æ–π–∫–µ:": "–†–µ–∂—É—â–∞—è",
"–ö–∞–∫–æ–π –±–æ–≥ –æ—Å—Ç–∞–≤–∞–ª—Å—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–º –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ?": "–°–º–æ—Ç—Ä–∏—Ç–µ–ª—å",
"–õ–∏–º–∏—Ç –±—Ä–æ–Ω–∏ –≤ –¢–µ–º–Ω–æ–ª–µ—Å—å–µ –¥–ª—è —Ä–æ–ª–∏ \"–¢–∞–Ω–∫\":": "75%",
"–ë–æ–Ω—É—Å \"+20% —à–∞–Ω—Å –Ω–µ –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞—Ç—å –∑–µ–ª—å–µ –ø—Ä–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ:": "–ì–æ–±–ª–∏–Ω",
"–í—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—Ç—Ä–∞—á–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ \"–û—Ç–¥—ã—Ö\" –≤ –ø–æ–¥–∑–µ–º–µ–ª—å—è—Ö –ø—Ä–∏ –Ω–∞–¥–µ—Ç–æ–π –∫–Ω–∏–≥–µ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ —É–º–µ–Ω–∏—è \"–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ\":": "10 —Å–µ–∫—É–Ω–¥",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –¢–µ–º–Ω–æ–ª–µ—Å—å—è \"20% –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è –æ—Ç –Ω–∞–Ω–µ—Å–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–Ω–∞ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é, –Ω–æ –Ω–µ –±–æ–ª–µ–µ 20% –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –∑–∞ —Ä–∞–∑\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É:": "–ö—Ä–æ–≤–æ–ø–∏–π—Ü–∞",
"–° –∫–∞–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏–≥—Ä–æ–∫–∞–º –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Ö–æ–¥ –≤ –¢–µ–º–Ω–æ–ª–µ—Å—å–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤—Ç–æ—Ä–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏ –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –æ—Ç–≤–∞–≥–∏?": "30",
"–ö–∞–∫ —ç–ª—å—Ñ—ã —É–ø—Ä–∞–≤–ª—è–ª–∏ —Å–≤–æ–∏–º–∏ –ª–µ—Å–∞–º–∏?": "–†–∏—Ç—É–∞–ª–∞–º–∏ –∏ –º–∞–≥–∏–µ–π",
"–ß—Ç–æ —Å—Ç—Ä–µ–º–∏—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –û—Ä–¥–µ–Ω –†—ã—Ü–∞—Ä–µ–π –ì–ª—É–±–∏–Ω —Å \"–°–µ—Ä–¥—Ü–µ–º –ì–ª—É–±–∏–Ω\"?": "–£–Ω–∏—á—Ç–æ–∂–∏—Ç—å",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª–∞—Å—å —Ä–µ–∫–∞, —Ä–∞–∑–¥–µ–ª—è—é—â–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –∞–ª—å—è–Ω—Å–æ–≤?": "–ú–∏–¥",
"–ö—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞–ª –ª—É—á—à–∏–µ –ª–µ—á–µ–±–Ω—ã–µ –∑–µ–ª—å—è?": "–ì–Ω–æ–º—ã",
"–ü–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, –ø–æ–≤—ã—à–∞—é—â–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–º–µ–Ω–∏–π –¥–æ —Ç—Ä–µ—Ö:": "–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å",
"–ö—Ç–æ —Å—Ç–∞–ª –ø—Ä–∏—á–∏–Ω–æ–π –í—Ç–æ—Ä–æ–≥–æ –ö–∞—Ç–∞–∫–ª–∏–∑–º–∞?": "–õ—é–¥–∏",
"–ß—Ç–æ —Å—Ç–∞–ª–æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ–º –í—Ç–æ—Ä–æ–≥–æ –ö–∞—Ç–∞–∫–ª–∏–∑–º–∞?": "–í–æ–π–Ω–∞ —Å –¢–≤–∞—Ä—è–º–∏ –≥–ª—É–±–∏–Ω",
"–ö–∞–∫–æ–µ –∑–µ–ª—å–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ –±–æ–π?": "–ó–µ–ª—å–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
"–ë–æ–Ω—É—Å \"-15% HP —É –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤, –Ω–µ —è–≤–ª—è—é—â–∏—Ö—Å—è –Ω–µ–∂–∏—Ç—å—é –∏–ª–∏ –¥–µ–º–æ–Ω–æ–º\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ:": "–î–µ–º–æ–Ω",
"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ö–Ω–∏–≥ –ê–¥–º–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–ø–æ—Å–æ–±–µ–Ω –Ω–∞–¥–µ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂:": "1",
"–ö–∞–∫–æ–µ –≥–ª–∞–≤–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ü–µ–Ω–∏–ª–æ—Å—å —Å—Ä–µ–¥–∏ –æ—Ä–∫–æ–≤ –¥–∏—Å–∫–∞?": "–ß–µ—Å—Ç—å –∏ –æ—Ç–≤–∞–≥–∞",
"–ö—Ç–æ –∏–∑ –±–æ–≥–æ–≤ –≤—ã—Å—Ç—É–ø–∞–ª –∑–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ —Ç—Ä—É–¥–∞?": "–¢—Ä–æ—Ä",
"–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ú–∏—Ä–æ–≤–æ–π –±–æ—Å—Å –ø–æ—Å–ª–µ –µ–≥–æ –ø—Ä–∏–∑—ã–≤–∞?": "10 —á–∞—Å–æ–≤",
"–ö–∞–∫–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –±—ã–ª–∞ —Å–ø–æ—Ä–Ω–æ–π –º–µ–∂–¥—É –æ—Ä–∫–∞–º–∏ –∏ —ç–ª—å—Ñ–∞–º–∏?": "–î–æ–ª–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏",
"–ö–∞–∫–∞—è —Ä–∞—Å–∞ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞ –Ω–µ–π—Ç—Ä–∞–ª–∏—Ç–µ—Ç –≤–æ –í—Ç–æ—Ä–æ–º –ö–∞—Ç–∞–∫–ª–∏–∑–º–µ?": "–ù–∏–∫—Ç–æ",
"–ë–æ–Ω—É—Å \"+33% —à–∞–Ω—Å –≤—ã–∂–∏—Ç—å —Å 1 HP –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ–≥–æ —É–¥–∞—Ä–∞\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ:": "–ù–µ–∂–∏—Ç—å",
"–ù–∏–∂–Ω–∏–π –ª–∏–º–∏—Ç —É—Ä–æ–≤–Ω—è –¥–ª—è —Å—Ä–∞–∂–µ–Ω–∏—è —Å –±–æ—Å—Å–æ–º –¢–µ–º–Ω–æ–ª–µ—Å—å—è –±–µ–∑ –ü—Ä–µ–º–∏—É–º-–∞–∫–∫–∞—É–Ω—Ç–∞ —Ä–∞–≤–µ–Ω:": "80% –æ—Ç –±–æ—Å—Å–∞ –∏ -10",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å \"—Å–Ω–∏–∂–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±—Ä–æ—Å–∞ —É—Ä–æ–Ω–∞ –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏, –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ç–æ–π–∫–µ:": "–†–µ–∂—É—â–∞—è",
"–®–∞–Ω—Å –Ω–∞ —É—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∑–µ–ª–∏–π –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –±–∞–∑–æ–≤–æ —Ä–∞–≤–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç—É:": "–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –¢–µ–º–Ω–æ–ª–µ—Å—å—è \"30% —à–∞–Ω—Å –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–¥–∞—Ä—ã –≤ –±–ª–∏–∂–Ω–µ–º –∏ –¥–∞–ª—å–Ω–µ–º –±–æ—é\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É:": "–ê—Å—Å–∞—Å–∏–Ω",
"–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤–∞–Ω—Ç—é—Ä–∏—Å—Ç, –≤—ã–±—Ä–∞–≤—à–∏–π—Å—è –Ω–∞–≤–µ—Ä—Ö –ø–æ—Å–ª–µ –≤—Å—Ç—Ä–µ—á–∏ —Å \"–°–µ—Ä–¥—Ü–µ–º –ì–ª—É–±–∏–Ω\":": "–ì–µ—Ä",
"–ë–æ–Ω—É—Å: +5% —à–∞–Ω—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–Ω –æ—Ç –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏": "–ì–Ω–æ–º",
"–ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º ‚úß ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è": "–ü–æ–≥–ª–æ—â–∞–µ—Ç—Å—è –±—Ä–æ–Ω–µ–π",
"–°–∏–ª–∞ —Ç–µ–Ω–µ–π –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω, –∑–∞–≤–∏—Å—è—â–∏–π –æ—Ç": "–£—Ä–æ–≤–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞",
"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å \"–ø—Ä–æ–ø—É—Å–∫ —Ñ–∞–∑—ã –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏, –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø–æ–≥–ª–æ—â–µ–Ω–∏—è —É—Ä–æ–Ω–∞ –±—Ä–æ–Ω–µ–π –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –ø–æ–≥–ª–æ—â–µ–Ω–∏—è\" –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ç–æ–π–∫–µ": "–ó–∞—â–∏—Ç–Ω–∞—è",
"–ß—Ç–æ —Å—Ç—Ä–µ–º–∏—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –û—Ä–¥–µ–Ω –†—ã—Ü–∞—Ä–µ–π –ì–ª—É–±–∏–Ω —Å \"–°–µ—Ä–¥—Ü–µ–º –ì–ª—É–±–∏–Ω\"?": "–£–Ω–∏—á—Ç–æ–∂–∏—Ç—å",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª—Å—è –≥–ª–∞–≤–Ω—ã–π –≥–æ—Ä–æ–¥ –æ—Ä–∫–æ–≤?": "–ö–µ—Ç—Ä",
"–ë–æ–Ω—É—Å +20% –∫ –ø–æ–ª—É—á–∞–µ–º–æ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –û—Ä–¥–µ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–≥—Ä–æ–≤–æ–π —Ä–∞—Å–µ": "–ß–µ–ª–æ–≤–µ–∫",
"–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç üí´–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ—é —Ä–∞–≤–µ–Ω": "95%",
"–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª–∞—Å—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –ª—é–¥—å–º–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –°–µ—Ä–¥—Ü–∞ –ì–ª—É–±–∏–Ω?": "–û—Ä–¥–µ–Ω –ì–ª—É–±–∏–Ω"
}
Collection = [
#    ("–î–æ–±—ã—Ç—å", [
#        "üçô–≤—ã",
#        "–∂–∏–ª—É –∂–µ–ª–µ–∑–Ω–æ–π —Ä—É–¥—ã.",
#        "üå≤B—ã ",
#        "üå≤B—ã ",
#        "üçÉ–≤—ã "
#    ]),
#    ("–û—Å–≤–µ–∂–µ–≤–∞—Ç—å", [
#        "–ø–æ–∫–æ–∏—Ç—Å—è —Å–æ–≤—Å–µ–º —Ä—è–¥–æ–º",
#        "–ø–æ–∫–æ–∏—Ç—Å—è —Ä—è–¥–æ–º —Å –≤–∞–º–∏",
#        "–ø–æ–∫–æ–∏—Ç—Å—è –Ω–µ–ø–æ–¥–∞–ª–µ–∫—É"
#    ]),
#    ("–°–æ–±—Ä–∞—Ç—å", [
#        "üå∫–í—ã",
#        "üå∫B—ã",
#        "–æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç–µ —Ü–≤–µ—Ç–æ–∫ –∞–¥–º–æ–≤",
#        "—Ä–∞—Å—Ç—É—â–∏–π –Ω–µ–ø–æ–¥–∞–ª–µ–∫—É.",
#        "–º—è—Å–Ω–æ–≥–æ –∂—É–∫–∞"
#    ]),
#    ("–û—Å–º–æ—Ç—Ä–µ—Ç—å", [
#        "üìöB—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏",
#        "‚öîÔ∏èB—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏",
#        "‚öîÔ∏è–í—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏",
#        "üó≥B—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏",
#        "üèÆB—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏",
#        "üíÄB—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏",
#        "üõ°B—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏",
#    ])
]
ANSWERS = [
    "–†—ã–±–∏–π –∂–∏—Ä", "–†—ã–±–∏–π –≥–ª–∞–∑", "–°–∏–ª–∞ —Ç–µ–Ω–µ–π", "–£–¥–∞—Ä –≤–∞–º–ø–∏—Ä–∞", "–ì—Ä—è–∑–Ω—ã–π —É–¥–∞—Ä",
    "–ö–æ–ª—é—â–∏–π —É–¥–∞—Ä", "–†–µ–∂—É—â–∏–π —É–¥–∞—Ä", "–î—Ä–æ–±—è—â–∏–π —É–¥–∞—Ä", "–ö—Ä–æ–≤–∞–≤—ã–π –≥—Ä–∏–±", "–ê–¥—Å–∫–∏–π –≥—Ä–∏–±",
    "–ê–¥—Å–∫–∏–π –∫–æ—Ä–µ–Ω—å", "–ö–æ—Ä–µ–Ω—å –∑–Ω–∞–Ω–∏–π", "–ú–æ—â–Ω—ã–π —É–¥–∞—Ä", "–¶–µ–ª–µ–±–Ω—ã–π –æ–≥–æ–Ω—å", "–û–≥–æ–Ω–µ–∫ –Ω–∞–¥–µ–∂–¥—ã",
    "–°–ª–∞–±–æ–µ –∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "–ó–∞—â–∏—Ç–Ω–∞—è —Å—Ç–æ–π–∫–∞", "–ñ–µ–ª–µ–∑–Ω–∞—è —Ä—É–¥–∞", "–õ–æ–≤–∫–æ—Å—Ç—å —Ä—É–∫", "–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ",
    "–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –≥–æ–ª–æ–≤–∞–º–∏", "–ü—Ä–µ–∑—Ä–µ–Ω–∏–µ –∫ –±–æ–ª–∏", "–ü—Ä–æ–∫–ª—è—Ç–∏–µ —Ç—å–º—ã", "–ù–µ–æ–±—ã—á–Ω—ã–π —Ü–≤–µ—Ç–æ–∫", "–ù–µ–æ–±—ã—á–Ω–∞—è —Ä–∞–∫—É—à–∫–∞",
    "–†–∞—Å—Å–µ—á–µ–Ω–∏–µ", "–°–æ–±–∏—Ä–∞—Ç–µ–ª—å", "–ù–µ—É—è–∑–≤–∏–º—ã–π", "–ë–µ—Å—Å—Ç—Ä–∞—à–∏–µ", "–ß–µ—Ä–Ω–∏–ª—å–Ω–∏–∫",
    "–£—Å—Ç—Ä–∞—à–µ–Ω–∏–µ", "–ö–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∞", "–ü–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å", "–†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è", "–û—à–µ–ª–æ–º–ª–µ–Ω–∏–µ",
    "–°–∫–≤–µ—Ä–Ω–æ–ª–∏—Å—Ç", "–°—É–µ–≤–µ—Ä–Ω–æ—Å—Ç—å", "–ü–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ", "–ö—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ", "–ó–∞–ø–∞—Å–ª–∏–≤–æ—Å—Ç—å",
    "–ù–µ–∑–∞–º–µ—Ç–Ω–æ—Å—Ç—å", "–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å", "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å", "–†–∞—Å—á–µ—Ç–ª–∏–≤–æ—Å—Ç—å", "–ù–µ–ø–æ–∫–æ–ª–µ–±–∏–º—ã–π",
    "–†–∞—Å—Ç–æ—Ä–æ–ø–Ω–æ—Å—Ç—å", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", "–õ–µ–Ω", "–†—ã–±–∞–∫",
    "–¢–∞—Ä–∞–Ω", "–ë—Ä–µ–≤–Ω–æ", "–†–∞—Å–∫–æ–ª", "–£–≥—Ä–æ–∑–∞", "–£—á–µ–Ω–∏–∫", "–ë–∞—Ä—å–µ—Ä"
    "–§–µ–Ω–∏–∫—Å", "–ö–∞–º–µ–Ω—å", "–ú–∞—Ä–æ–¥–µ—Ä", "–í–µ–¥—å–º–∞–∫", "–°–ª–µ–ø–æ—Ç–∞", "–ï—Ä–µ—Ç–∏–∫"
    "–†–∞—Å–ø—Ä–∞–≤–∞", "–í–æ–¥–æ—Ö–ª–µ–±", "–ë–æ–ª–æ—Ç–Ω–∏–∫", "–ê—Ç–ª–µ—Ç–∏–∫–∞", "–ë–µ—Ä—Å–µ—Ä–∫–µ—Ä",
    "–ó–∞—Ä–∞–∂–µ–Ω–∏–µ", "–ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ", "–í–æ–∑–¥–∞—è–Ω–∏–µ", "–ì–ª–∞–¥–∏–∞—Ç–æ—Ä", "–£–ø–æ—Ä–Ω–æ—Å—Ç—å",
    "–ü—Ä–æ—á–Ω–æ—Å—Ç—å", "–ö–∞–º–Ω–µ—Ü–≤–µ—Ç", "–ë—Ä–∞–∫–æ–Ω—å–µ—Ä", "–ö–æ–ª—å—Ü–æ –∑–µ–ª–∏–π", "–ö–æ–ª—å—Ü–æ –∑–ª–æ–≥–æ –≥–ª–∞–∑–∞",
    "–ö–∞–º–µ–Ω—å —Å—É–¥—å–±—ã", "–ö–æ–ª—å—Ü–æ –Ω–∞–≤—ã–∫–æ–≤", "–ö–æ–ª—å—Ü–æ –≥–æ–±–ª–∏–Ω–∞", "–ö–æ–ª—å—Ü–æ –≤–µ–ª–∏–∫–∞–Ω–∞", "–ö–æ–ª—å—Ü–æ —Ä–µ–¥–∫–æ—Å—Ç–µ–π",
    "–ö–æ–ª—å—Ü–æ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏", "–ú–∞–ª–æ–µ –∫–æ–ª—å—Ü–æ —Å–∏–ª—ã", "–ú–∞–ª–æ–µ –∫–æ–ª—å—Ü–æ —Ç–æ—á–Ω–æ—Å—Ç–∏", "–ú–∞–ª–æ–µ –∫–æ–ª—å—Ü–æ –ª–æ–≤–∫–æ—Å—Ç–∏",
    "–ú–∞–ª–æ–µ –∫–æ–ª—å—Ü–æ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏", "–ú–∞–ª–æ–µ –∫–æ–ª—å—Ü–æ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏", "–ß–∏—Å—Ç–∞—è –ø–µ—Ä–≤–æ–∑–¥–∞–Ω–Ω–∞—è –≤–æ–¥–∞", "–°—Ç–æ–π–∫–∞ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∏—è",
    "–ü–µ—â–µ—Ä–Ω—ã–π –∫–æ—Ä–µ–Ω—å", "–°–≤–µ—Ä–∫–∞—é—â–∞—è —á–µ—à—É—è", "–ó–µ–ª—å–µ –º–µ—Ç–∫–æ—Å—Ç–∏", "–ó–µ–ª—å–µ –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏—è", "–ó–µ–ª—å–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
    "–ó–µ–ª—å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫", "–ó–µ–ª—å–µ —Å–Ω—è—Ç–∏—è —Ç—Ä–∞–≤–º", "–ó–Ω–∞–Ω–∏—è –¥—Ä–µ–≤–Ω–∏—Ö"
]
Event1 = {
    "—Ç—É—Ç e—Å—Ç—å —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ...", 
    "–Ω–µ –ø–æ–¥–¥–∞–µ—Ç—Å—è –í–∞—à–∏–º —É—Å–∏–ª–∏—è–º.",
    "–±–æ–ª—å—à–µ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ–±—ã—á–∏!", " –±–æ–ª—å—à–µ –Ω–µ—Ç –¥–æ–±—ã—á–∏!", "–¥–æ–±—ã—á–∞ –æ–∂–∏–¥–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏, –Ω–æ –¥–æ–±—ã—á–µ–π –º–æ–∂–µ—Ç–µ –æ–∫–∞–∑–∞—Ç—å—Å—è",
    "–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –º–∞–≥–∏—á–µ—Å–∫–∏–º –≤–æ–¥–∞–º.", "–æ–±—á–∏—Å—Ç–∏—Ç—å –í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å",
    "–í—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –≥–æ—Ä—à–æ–∫ —Å –∑–æ–ª–æ—Ç–æ–º", "–ø–µ—Ä–µ–∂–∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è, –Ω–æ –Ω—É–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å—Å—è", "üî®–õ–æ–≤—É—à–∫–∞ –æ–±–µ–∑–≤—Ä–µ–∂–µ–Ω–∞!",
    "–ö–æ–≥–¥–∞ –í—ã —É–∂–µ –ø–æ—á—Ç–∏ –ø—Ä–∏–∫–æ—Å–Ω—É–ª–∏—Å—å –∫", "–û–¥–Ω–∞–∫–æ, –±–ª–∞–≥–æ–¥–∞—Ä—è –ª–æ–≤–∫–æ—Å—Ç–∏ –∏ —É–¥–∞—á–µ, –í–∞–º", "–í—ã –ø–µ—Ä–µ–∂–∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è",
    "–û—Ç–¥—ã—Ö –±—ã–ª –ø—Ä–µ—Ä–≤–∞–Ω –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω–µ", "—Ç—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç—ã–º–∏ –¥–≤–µ—Ä—è–º–∏.", "–ö–æ–≥–¥–∞ –í—ã —É–∂–µ –ø–æ—á—Ç–∏ –ø—Ä–∏–∫–æ—Å–Ω—É–ª–∏—Å—å",
    "–í–∞—à–∏ –æ–±—ã—á–Ω—ãe —Ç—Ä–æ—Ñ–µ–∏ –ø–æ —Ü–µ–Ω–µ", "üå±–ö–æ—Ä–Ω–∏ —Ä–∞—Å—Çe–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç –∂–∞–¥–Ω–æ –≤–ø–∏—Ç—ã–≤–∞—Ç—å",
    "‚åõ–°—Ç–µ–±–µ–ª—å –ø—Ä–æ—Ä–∞—Å—Ç–∞–µ—Ç –ø—Ä—è–º–æ –Ω–∞ –≥–ª–∞–∑–∞—Ö...", "–í—ã –≤—ã—Ä–∞—Å—Ç–∏–ª–∏ –∏ —Å–æ–±—Ä–∞–ª–∏ ", #"‚åõ–í—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞: 1 —á–∞—Å",
    "‚åõ–í—ã –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç–µ—Å—å –∫ ", "‚åõ–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–∏:", "‚åõ–í—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ –æ–±—ã—Å–∫ —Ä—É–∏–Ω",
    "—Ç—É—Ç e—Å—Ç—å —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ... ", "—Å–∫—Ä—ã—Ç—ã–π –ø—Ä–æ—Ö–æ–¥ –Ω–∞ —Å–ªe–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–∑–µ–º–µ–ª–∏–π!",
    "–í—ã –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å—Ç—É–ø–∞–µ—Ç–µ –Ω–∞ –±–æ–ª–æ—Ç–æ", "–î–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∑–µ–ª—å—è –≤–µ–¥—å–º–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç", "—Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω –∫—Ä–æ–≤–∞–≤—ã–π –º–æ—Ö, ",
    "–ù–∞ –¥–≤e—Ä–∏ –∏–º–µe—Ç—Å—è –æ—Ç–≤–µ—Ä—Å—Ç–∏–µ –¥–ª—è –≤—Å—Ça–≤–∫–∏ –∫–∞–∫–æ–≥–æ-—Ç–æ –Ω–µ–±o–ª—å—à–æ–≥–æ –ø—Äe–¥–º–µ—Ça,",
    "–ø–æ—Å—Ä–µ–¥–∏ —Å—ã—Ä–æ–≥–æ –∫–∞–º–Ω—è —Å—Ç–µ–Ω –ø—Ä–æ—Å—Ç—É–ø–∞—é—Ç –æ—á–µ—Ä—Ç–∞–Ω–∏—è –∏—Å–ø–æ–ª–∏–Ω—Å–∫–æ–≥–æ —á–µ—Ä–µ–ø–∞.",# –ß–µ—Ä–µ–ø
    "–ü–æ–ø—ã—Ç–∫–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä—É–Ω –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å. ",
    "üö´–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –Ω–∞–±—Ä–∞—Ç—å –µ—â–µ –±–æ–ª—å—à–µ –≤–æ–¥—ã",
    "–ö–∞–∫–∞—è –∂–µ –Ω–∞–≥—Ä–∞–¥–∞ –∂–¥—ë—Ç –í–∞—Å, –∫–æ–≥–¥–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å",
    "–æ–¥–Ωa–∫–æ –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è o—Ç–∫—Ä—ã—Ç—å –¥–≤e—Ä—å –∏ —Å –ø–æ–ºo—â—å—é —Å–∏–ª—ã"
}
Event2 = [
    "–ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±—ã—Å–∫–∞—Ç—å –æ—Å—Ç–∞–Ω–∫–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π",
    #"–ö–∞–∫–∞—è –∂–µ –Ω–∞–≥—Ä–∞–¥–∞ –∂–¥—ë—Ç –í–∞—Å, –∫–æ–≥–¥–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ",
    "–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –í–∞–º c—ã–≥—Äa—Ç—å –≤ –∫–æ—Å—Ç–∏",
    "–úo–∂–Ω–æ c—Ä–∞–∑–∏—Ç—å—Å—è c –Ω–∏–º, –Ω–µ —Ç–µp—è—è –≤pe–º–µ–Ω–∏,", "–Ω–∞—à–µ–ª—Å—è –≤–Ω–µ–∑–∞–ø–Ω—ã–π –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫!",
]
Eventstatus = {
    "BooksActive": False,
    "DoorActive": False,
    "SageActive": False, 
}

# ==================== –§–£–ù–ö–¶–ò–ò –° –û–ë–†–ê–ë–û–¢–ö–û–ô ====================
# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
def send_message(vk_api, text, max_retries=3):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏"""
    for attempt in range(1, max_retries + 1):
        try:
            vk_api.messages.send(
                peer_id=iid,
                message=text,
                random_id=random.randint(-2147483648, 2147483647)
            )
            print(f"{Fore.GREEN}[SENT] {text}{Fore.RESET}")
            return True
            
        except vk_api.Captcha:
            print(f"{Fore.YELLOW}[CAPTCHA] –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º...{Fore.RESET}")
            return False
            
        except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
            print(f"{Fore.RED}[SEND ERROR] {attempt}/{max_retries}: {e}{Fore.RESET}")
            if attempt < max_retries:
                time.sleep(RETRY_DELAY)
            else:
                return False
        except Exception as e:
            print(f"{Fore.RED}[UNEXPECTED SEND ERROR] {e}{Fore.RESET}")
            return False
# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
def get_buttons(vk_api, message_id, show=True, save_name=None, max_retries=3):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏"""
    global LAST_BUTTONS, SAVED_BUTTONS
    
    for attempt in range(1, max_retries + 1):
        try:      
            #vk.messages.getById(message_ids=event.message_id, v='5.199')['items'][0]
            msg = vk_api.messages.getById(message_ids=message_id)["items"][0]  
            keyboard = msg.get("keyboard")

            
            if not keyboard:
                #if show:
                #    print(f"{Fore.GREEN}[–ö–Ω–æ–ø–æ–∫ –Ω–µ—Ç.]{Fore.RESET}")
                return []

            buttons = []
            for r, row in enumerate(keyboard.get("buttons", [])):
                for c, button in enumerate(row):
                    action = button.get("action", {})
                    buttons.append({
                        "label": action.get("label"),
                        "payload": action.get("payload"),
                        "color": button.get("color"),
                        "row": r, "col": c
                    })

            LAST_BUTTONS = buttons
            if save_name:
                SAVED_BUTTONS.append({"name": save_name, "buttons": buttons})
            return buttons
            
            
        except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
            print(f"{Fore.RED}[GET_BUTTONS ERROR] {attempt}/{max_retries}: {e}{Fore.RESET}")
            if attempt < max_retries:
                time.sleep(RETRY_DELAY)
            else:
                return []
        except Exception as e:
            print(f"{Fore.RED}[UNEXPECTED GET_BUTTONS ERROR] {e}{Fore.RESET}")
            return []
# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –ø–æ –∏–Ω–¥–µ–∫—Å—É
def apply_button_index(index, peer_id, buttons=None, text=None, max_retries=3):
    """–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏"""
    if buttons is None:
        buttons = LAST_BUTTONS
        
    try:
        b = buttons[index]
        print(f"{Fore.YELLOW}apply_buttons: {b}{Fore.RESET}")
    except IndexError:
        return False, "–ò–Ω–¥–µ–∫—Å –Ω–µ –Ω–∞–π–¥–µ–Ω"

    b_type = b.get("type")
    if b_type == "text" or b_type is None:
        msg = text or b.get("label", "") or ""
        
        for attempt in range(1, max_retries + 1):
            try:
                time.sleep(1.2)
                vk.messages.send(
                    peer_id=peer_id,
                    message=msg,
                    random_id=random.randint(-2**31, 2**31 - 1)
                )
                return True, "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
                
                
            except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
                print(f"{Fore.RED}[BUTTON ERROR] {attempt}/{max_retries}: {e}{Fore.RESET}")
                if attempt < max_retries:
                    time.sleep(RETRY_DELAY)
                else:
                    return False, f"–û—à–∏–±–∫–∞ –ø–æ—Å–ª–µ {max_retries} –ø–æ–ø—ã—Ç–æ–∫"
            except Exception as e:
                return False, f"–û—à–∏–±–∫–∞: {e}"
    else:
        return False, f"–¢–∏–ø –∫–Ω–æ–ø–∫–∏ {b_type}"
# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ –∫–Ω–æ–ø–∫–∏ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É
def find_button_index(buttons, keyword):
    for i, b in enumerate(buttons):
        if keyword.lower() in b["label"].lower():
            print(f"{Fore.CYAN}[BUTTON FOUND] '{keyword}' -> {i}{Fore.RESET}")
            return i
    print(f"{Fore.RED}[BUTTON NOT FOUND] '{keyword}'{Fore.RESET}")
    return None
# –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ id
def Ms(peer_id, text):
    session_api.messages.send(peer_id=peer_id, message=text, random_id=0) 
    time.sleep(2)

# ============= –ü–ê–†–°–ò–ù–ì ===============
def update_game_state(text):
    global GAME_STATE, WaitAte
    text_lower = text.lower()

    if "–ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º".lower() in text_lower:
        for line in text.split('\n'):
            line = line.strip()

            m = re.match(r'üë§\s*–ö–∞—Ä–º–∞:\s*(\d+)', line, re.I)
            if m:
                GAME_STATE["karma"] = int(m.group(1))
                continue

            m = re.match(r'üñ§\s*–¢—Ä–∞–≤–º—ã:\s*(\d+)', line, re.I)
            if m:
                GAME_STATE["injuries"] = int(m.group(1))
                if GAME_STATE["injuries"] > 5:
                    time.sleep(0.6)
                    send_message(vk, "–°–Ω—è—Ç—å —Ç—Ä–∞–≤–º—ã –∑–µ–ª—å–µ–º")
                    GAME_STATE["injuries"] = GAME_STATE["injuries"] - 5
                continue

            m = re.match(r'üçñ\s*–°—ã—Ç–æ—Å—Ç—å:\s*(\d+)%', line, re.I)
            if m:
                GAME_STATE["Hunger"] = int(m.group(1))
                continue

            m = re.match(r"ü•ß–ï–¥–∞:\s+(\d+)/\d+üêü\s+(\d+)/\d+üçó", line, re.I)
            if m:
                GAME_STATE["fish"] = int(m.group(1))
                GAME_STATE["meat"] = int(m.group(2))
                if GAME_STATE["Hunger"] < 100 - ((GAME_STATE["fish"] * 4) + (GAME_STATE["meat"] * 4)):
                    time.sleep(0.6)
                    apply_button_index(iid, "–ì–æ—Ç–æ–≤–∫–∞")
                    GAME_STATE["fish"] = 0
                    GAME_STATE["meat"] = 0
                continue

            m = re.match(r'üëÅ\s*–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞:\s*(\d+)/(\d+)', line, re.I)
            if m:
                GAME_STATE["stealth"] = {
                    "current": int(m.group(1)),
                    "max": int(m.group(2))
                }
                continue

            m = re.match(r'‚ú®\s*–≠—Ñ—Ñ–µ–∫—Ç—ã:\s*(.+)', line, re.I)
            if m:
                GAME_STATE["effects"] = list(m.group(1))
            elif m == "–Ω–µ—Ç":
                GAME_STATE["effects"] = None
                continue

            m = re.match(r'üìú\s*–ó–∞–¥–∞–Ω–∏–µ:\s*(.+)', line, re.I)
            if m:
                GAME_STATE["quest"] = m.group(1).strip()
            elif m == "–Ω–µ—Ç":
                GAME_STATE["quest"] = None
                continue
                
        print(f"{Fore.BLUE}–°–æ—Å—Ç–æ—è–Ω–∏–µ: {GAME_STATE}{Fore.RESET}")
        return GAME_STATE

    if "üíö" in text:
        for line in text.split('\n'):
            if "%" in line:
                match = re.search(r'(\d+)%', line)
                if match:
                    GAME_STATE["HP"] = int(match.group(1))
                    print(f"{Fore.BLUE}HP: {GAME_STATE['HP']}%{Fore.RESET}")
            if "üíÄ" in line:
              match = re.search(r'üíÄ.*?(\d+)', line)
              if match:
                  GAME_STATE["trophies"] = int(match.group(1))
                  print(f"–¢—Ä–æ—Ñ–µ–∏: {GAME_STATE['trophies']}")
                
    if "üß≠–°–∫–æ—Ä–æ—Å—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:".lower() in text_lower:
        match = re.search(r'(\d+)%', text)
        if match:
            GAME_STATE["Hunger"] = int(match.group(1))
            print(f"{Fore.BLUE}–ì–æ–ª–æ–¥: {GAME_STATE['Hunger']}%{Fore.RESET}")
        
    for line in text.split('\n'):
        if "–û—Å—Ç–∞–ª–æ—Å—å –º–µ—Å—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ" in line:
            match = re.search(r':\s*(\d+)', line)
            if match:
                GAME_STATE["INV"] = int(match.group(1))
                print(f"{Fore.GREEN}–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: {GAME_STATE['INV']}{Fore.RESET}")
            break
    if "üîì" in text:
        if "üîì" in line in text_lower:
            match = re.search(r'üîì.*?(\d+)', line)
            if match:
                GAME_STATE["INV"] = int(match.group(1))
                print(f"–ú–µ—Å—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ: {GAME_STATE['INV']}")
    if "–°—ã—Ä–∞—è —Ä—ã–±–∞ +1".lower() in text:
        GAME_STATE["fish"] += 1
        GAME_STATE["fish"] = min(GAME_STATE["fish"], 3)
        print("+–†—ã–±–∞")
    if "–î–æ–±—ã—Ç –∫—É—Å–æ–∫ –º—è—Å–∞".lower() in text:
        GAME_STATE["meat"] += 1
        GAME_STATE["meat"] = min(GAME_STATE["meat"], 3)
        print("+–ú—è—Å–æ")
    if "–í—ã –ø–æ–ª—É—á–∏–ª–∏ —Ä—ã–±–∏–π –∂–∏—Ä!".lower() in text:
        profile.use_item(ItemId.FishOil, action=0, count=1) 


# ============= –†–ê–ë–û–¢–ê –° –ü–†–û–§–ò–õ–ï–ú –ü–ï–†–°–û–ù–ê–ñ–ê ===============
class Profile:
    def __init__(self, token):
        self.token = token
        self.session = requests.Session()
        self._params_cache = None
        self._params_fetched_at = None
        self._cache_ttl = 23 * 3600

    def _get_params(self):
        from urllib.parse import urlparse, parse_qs
        now = time.time()
        if self._params_cache and (now - self._params_fetched_at) < self._cache_ttl:
            return self._params_cache

        url = (
            f"https://api.vk.com/method/apps.get"
            f"?app_id=6987489&access_token={self.token}&v=5.131"
        )
        resp = self.session.get(url).json()
        webview_url = resp["response"]["items"][0]["webview_url"]
        parsed = urlparse(webview_url)
        p = {k: v[0] for k, v in parse_qs(parsed.query).items()}
        self._params_cache = {
            "sign": p["sign"], "vk_ts": p["vk_ts"],
            "vk_platform": p["vk_platform"], "vk_ref": p["vk_ref"],
            "vk_user_id": p["vk_user_id"],
        }
        self._params_fetched_at = time.time()
        return self._params_cache

    def use_item(self, item_id, action, count):
        p = self._get_params()
        request_url = (
            f"https://well2.activeusers.ru/app.php?act=a_sell_item"
            f"&sign={p['sign']}&vk_ts={p['vk_ts']}&vk_app_id=6987489"
            f"&vk_user_id={p['vk_user_id']}&vk_platform={p['vk_platform']}"
            f"&vk_language=ru&vk_ref={p['vk_ref']}&vk_is_app_user=1"
            f"&vk_are_notifications_enabled=0&vk_is_favorite=0&vk_access_token_settings="
        )
        headers = {
            "Content-Type": "application/x-www-form-urlencoded",
            "Referer": f"https://well2.activeusers.ru/app.php?act=item&id={item_id}&sign={p['sign']}&vk_app_id=6987489&vk_user_id={p['vk_user_id']}",
            "Origin": "https://well2.activeusers.ru",
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
            "X-Requested-With": "XMLHttpRequest",
        }
        resp = self.session.post(request_url, headers=headers, data=f"id={item_id}&m={action}&cnt={count}&iid=0").json()
        result = resp.get("result")
        success = result if isinstance(result, bool) else (result != 0 if isinstance(result, int) else False)
        message = resp.get("message", "OK") if success else resp.get("error", "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞")
        print(f"[PROFILE] {'‚úÖ' if success else '‚ùå'} {message}")
        return {"success": success, "message": message}
class ItemId:
    Water = 14439
    FishOil = 14453
    Flower = 14452
    Courage= 15346  #–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –æ—Ç–≤–∞–≥–∏
    PotionRing = 14238 #–ö–æ–ª—å—Ü–æ –∑–µ–ª–∏–π

profile = Profile(TOKEN)
# –ü—Ä–∏–º–µ—Ä             profile.use_item(ItemId.FishOil, action=0, count=1) 

# ==================== –ü–ê–†–°–ò–ù–ì –í–ï–©–ï–ô ====================
def parse_new_item(text):
    Skip = [
        "–ü—Ä–µ–¥–º–µ—Ç –ø—Ä–æ–¥–∞–Ω –∫–æ–º–ø–∞–Ω—å–æ–Ω—É",
        "—á–µ—Ç—ã—Ä–µ—Ö–ª–∏—Å—Ç–Ω—ã–π –∫–ª–µ–≤–µ—Ä",
        " –ø–µ—â–µ—Ä–Ω—ã–π –≥—Ä–∏–±",
        "–ó–≤–µ—Ä–∏–Ω–∞—è –∫–æ–∂–∞",
        "–æ–ª–µ–Ω—å–µ –∫–æ–ø—ã—Ç–æ",
        "–®–∫—É—Ä–∞ –∑–≤–µ—Ä—è",
        "–æ–ª–µ–Ω—å–∏ —Ä–æ–≥–∞",
        "—à–∫—É—Ä–∞ –æ–ª–µ–Ω—è",
        "–æ–ª–µ–Ω—å–µ —É—Ö–æ",
        "–ì–ª–∞–∑",
        "–ö–ª—ã–∫",
        "üèÆ"
    ]
    for line in text.splitlines():
        line = line.strip()
        if not line:
            continue
        if line.startswith(("üíÄ", "üèÆ")):
            continue
        if any(skip in line for skip in Skip):
            continue

        # –Ø–≤–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã ‚Äî –±–µ–∑ –ø—É—Å—Ç–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
        match_loot = re.search(
            r'(?:–í—ã –ø–æ–ª—É—á–∏–ª–∏|–ü–æ–ª—É—á–µ–Ω–æ)[:\s-]+\s*(.+?)(?:!|$)',
            line
        )
        if match_loot:
            add_item(match_loot.group(1).strip())
            continue

        # –î–æ–±—ã—á–∞
        match_dig = re.search(
            r'^üëù–í—ã —É—Å–ø–µ—à–Ω–æ –¥–æ–±—ã–ª–∏ 1\s+(.+?)!',
            line
        )
        if match_dig:
            add_item(match_dig.group(1).strip())
            continue

        # –°–±–æ—Ä
        match_gather = re.search(
            r'^\S*–í—ã –≤—ã—Ä–∞—Å—Ç–∏–ª–∏ –∏ —Å–æ–±—Ä–∞–ª–∏\s+(.+?)(?:\.)',
            line
        ) or re.search(
            r'^\S*–í—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –∏ —Å–æ–±—Ä–∞–ª–∏\s+(.+?)(?:,|\.)',
            line
        )
        if match_gather:
            add_item(match_gather.group(1).strip())
def build_items_message():
    if not New_items:
        return "üì¶ –ù–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤"

    text = "üì¶ –ü–æ–ª—É—á–µ–Ω–æ:\n\n"

    for name, count in New_items.items():
        if count > 1:
            text += f"‚Ä¢ {name} ‚Äî {count} —à—Ç\n"
        else:
            text += f"‚Ä¢ {name}\n"

    return text
def add_item(name):
    if name in New_items:
        New_items[name] += 1
    else:
        New_items[name] = 1
def MyItems(peer_id):
    message = build_items_message()
    msg_id = Ms(peer_id, message)


    return msg_id

# ==================== INLINE BUTTONS ====================
def get_inline_buttons(vk_api, message_id, show=True, max_retries=3):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ inline –∫–Ω–æ–ø–æ–∫ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏"""
    for attempt in range(1, max_retries + 1):
        try:
            msg = vk_api.messages.getById(message_ids=message_id, v='5.199')["items"][0]
            keyboard = msg.get("keyboard")
            
            if not keyboard:
                if show:
                    print(f"{Fore.GREEN}[Inline –∫–Ω–æ–ø–æ–∫ –Ω–µ—Ç.]{Fore.RESET}")
                return []
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
            if not keyboard.get("inline", False):
                if show:
                    print(f"{Fore.YELLOW}[–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ inline]{Fore.RESET}")
                return []
            
            buttons = []
            for r, row in enumerate(keyboard.get("buttons", [])):
                for c, button in enumerate(row):
                    action = button.get("action", {})
                    buttons.append({
                        "label": action.get("label"),
                        "payload": action.get("payload"),
                        "type": action.get("type"),
                        "color": button.get("color"),
                        "row": r, "col": c
                    })
            
            if show:
                print(f"{Fore.CYAN}[INLINE] –ù–∞–π–¥–µ–Ω–æ {len(buttons)} inline –∫–Ω–æ–ø–æ–∫:{Fore.RESET}")
                for i, b in enumerate(buttons):
                    print(f"{Fore.GREEN}  {i}: {b['label']} [—Ç–∏–ø: {b['type']}, —Ü–≤–µ—Ç: {b['color']}]{Fore.RESET}")
            
            return buttons
            
        except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
            print(f"{Fore.RED}[GET_INLINE ERROR] {attempt}/{max_retries}: {e}{Fore.RESET}")
            if attempt < max_retries:
                time.sleep(RETRY_DELAY)
            else:
                return []
        except Exception as e:
            print(f"{Fore.RED}[UNEXPECTED INLINE ERROR] {e}{Fore.RESET}")
            return []
def find_and_press_inline(vk_api, message_id, keyword, peer_id, max_retries=3):
    """–ü–æ–∏—Å–∫ –∏ –Ω–∞–∂–∞—Ç–∏–µ inline –∫–Ω–æ–ø–∫–∏ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É"""
    # –ü–æ–ª—É—á–∞–µ–º inline –∫–Ω–æ–ø–∫–∏
    inline_buttons = get_inline_buttons(vk_api, message_id, show=True)
    
    if not inline_buttons:
        print(f"{Fore.RED}[INLINE] –ù–µ—Ç inline –∫–Ω–æ–ø–æ–∫{Fore.RESET}")
        return False
    
    # –ò—â–µ–º –∫–Ω–æ–ø–∫—É –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É (–≥–∏–±–∫–∏–π –ø–æ–∏—Å–∫)
    button_found = None
    button_index = None
    
    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º keyword –¥–ª—è –ø–æ–∏—Å–∫–∞ (—É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã, –ø—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É)
    keyword_normalized = keyword.lower().strip()
    
    for i, b in enumerate(inline_buttons):
        label = b["label"].lower().strip()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ
        if keyword_normalized in label or label in keyword_normalized:
            button_found = b
            button_index = i
            print(f"{Fore.CYAN}[INLINE FOUND] '{keyword}' -> {i}: '{b['label']}'{Fore.RESET}")
            break
    
    if not button_found:
        print(f"{Fore.RED}[INLINE NOT FOUND] '{keyword}'{Fore.RESET}")
        print(f"{Fore.YELLOW}–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:{Fore.RESET}")
        for i, b in enumerate(inline_buttons):
            print(f"{Fore.YELLOW}  {i}: {b['label']}{Fore.RESET}")
        return False
    
    # –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É (–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ—á–Ω—ã–π label –∏–∑ –∫–Ω–æ–ø–∫–∏)
    for attempt in range(1, max_retries + 1):
        try:
            time.sleep(1.2)
            vk_api.messages.send(
                peer_id=peer_id,
                message=button_found["label"],  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—á–Ω—ã–π label –∏–∑ –∫–Ω–æ–ø–∫–∏
                random_id=random.randint(-2**31, 2**31 - 1)
            )
            print(f"{Fore.GREEN}[INLINE PRESSED] '{button_found['label']}'{Fore.RESET}")
            return True
            
        except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
            print(f"{Fore.RED}[INLINE PRESS ERROR] {attempt}/{max_retries}: {e}{Fore.RESET}")
            if attempt < max_retries:
                time.sleep(RETRY_DELAY)
            else:
                return False
        except Exception as e:
            print(f"{Fore.RED}[INLINE PRESS ERROR] {e}{Fore.RESET}")
            return False

# ==================== –ë–û–ï–í–ê–Ø –°–ò–°–¢–ï–ú–ê ====================
BATTLE_STATE = {
    "active": False,
    "turn": 0,
    "enemy_hp": 100,
    "enemy_armor": 0,
    "player_hp": 100,
    "player_accuracy": 100,
    "player_skill_hit": 100,
    "potion_count": 8,
    "skill_blocked": False,
    "extra_action_blocked": False,
    "extra_action_used": False,
    "can_escape": True,
    "has_belt": True,
    "waiting_potion_select": False,  # –ñ–¥–µ–º –≤—ã–±–æ—Ä –∑–µ–ª—å—è
    "waiting_stance_select": False  
}
def is_battle_start(text: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª–∞ –±–æ—è"""
    has_enemy = "‚ù§" in text and any(x in text for x in ["‚≠ê", "üêæ", "üë£", "üíÄ"])
    has_player = "üíö" in text
    is_end = any(phrase in text.lower() for phrase in ["–±–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω", "—É–¥–∞–ª–æ—Å—å —Å–±–µ–∂–∞—Ç—å", "–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–µ–Ω–∏–µ"])
    return has_enemy and has_player and not is_end
def is_battle_end(text: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–æ—è"""
    end_phrases = [
        "–±–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω",
        "—É–¥–∞–ª–æ—Å—å —Å–±–µ–∂–∞—Ç—å",
        "–≤—ã –ø–æ–±–µ–¥–∏–ª–∏!",
        "–ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ —É–º—É–¥—Ä–∏–ª—Å—è –æ—Ç –í–∞—Å —Å–±–µ–∂–∞—Ç—å!",
        "–ø–æ–≥–ª–æ—Ç–∏–≤ –∂–∏–∑–Ω–µ–Ω–Ω—É—é —Å–∏–ª—É –ø–æ–≤–µ—Ä–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤",
        "–≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–µ–Ω–∏–µ –∏ —Ç—Ä–∞–≤–º—É"
    ]
    return any(phrase in text.lower() for phrase in end_phrases)
def should_skip_message(text: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–æ–ø—É—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    return "üí¨" in text
def init_battle(text: str):
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—è"""
    global BATTLE_STATE
    BATTLE_STATE.update({
        "active": True,
        "turn": 1,
        "enemy_hp": 100,
        "enemy_armor": 0,
        "player_hp": 100,
        "player_accuracy": 100,
        "player_skill_hit": 100,
        "potion_count": 8,
        "skill_blocked": False,
        "extra_action_blocked": False,
        "extra_action_used": False,
        "can_escape": True,
        "has_belt": True
    })
    
    print(f"{Fore.MAGENTA}[BATTLE START] –ë–æ–π –Ω–∞—á–∞–ª—Å—è!{Fore.RESET}")
    parse_battle_state(text)
def parse_battle_state(text: str):
    """–ü–∞—Ä—Å–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—è"""
    bs = BATTLE_STATE
    
    # HP –≤—Ä–∞–≥–∞ –∏ –∏–≥—Ä–æ–∫–∞
    for pattern, key, label in [
        (r'‚ù§.*?:\s*(\d+)/(\d+)', "enemy_hp", "–í—Ä–∞–≥"),
        (r'üíö.*?:\s*(\d+)/(\d+)', "player_hp", "–ò–≥—Ä–æ–∫")
    ]:
        match = re.search(pattern, text, re.DOTALL)
        if match:
            current, max_hp = int(match.group(1)), int(match.group(2))
            bs[key] = int((current / max_hp) * 100)
            print(f"{Fore.CYAN}[PARSE] {label} HP: {bs[key]}%{Fore.RESET}")
    
    # –ë—Ä–æ–Ω—è –≤—Ä–∞–≥–∞
    if armor := re.search(r'üõ°(\d+)%', text):
        bs["enemy_armor"] = int(armor.group(1))
        print(f"{Fore.CYAN}[PARSE] –ë—Ä–æ–Ω—è –≤—Ä–∞–≥–∞: {bs['enemy_armor']}%{Fore.RESET}")
    
    # –¢–æ—á–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞
    if acc := re.search(r'üéØ(\d+)%', text):
        bs["player_accuracy"] = int(acc.group(1))
        print(f"{Fore.CYAN}[PARSE] –¢–æ—á–Ω–æ—Å—Ç—å: {bs['player_accuracy']}%{Fore.RESET}")
    
    # –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞
    skill_matches = re.findall(r'üí´(\d+)%', text)
    if skill_matches:
        bs["player_skill_hit"] = int(skill_matches[-1])
        print(f"{Fore.CYAN}[PARSE] –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è: {bs['player_skill_hit']}%{Fore.RESET}")
    
    text_lower = text.lower()
    
    # –î–ï–ë–ê–§–§–´: —Ç–æ–ª—å–∫–æ –£–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú, –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
    if any(x in text_lower for x in ["–æ—à–µ–ª–æ–º–ª–µ–Ω—ã —Ä—ã–∫o–º", "–æ—à–∞—Ä–∞—à–µ–Ω—ã —Ä—ã–∫o–º", "–≥—Ä–æ–º–∫–∏–π —Ä—ã–∫"]):
        bs["skill_blocked"] = True
        print(f"{Fore.RED}[DEBUFF] –†—ã–∫! –ù–∞–≤—ã–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã{Fore.RESET}")
    
    if any(x in text_lower for x in ["–±—ã—Å—Ç—Ä—ã–π —Ç–µ–º–ø –±–æ—è", "–Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏"]):
        bs["extra_action_blocked"] = True
        print(f"{Fore.RED}[DEBUFF] –î–æ–ø. –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã!{Fore.RESET}")
    
    if "—Å–≤—è–∑–∞–ª –≤–∞—Å" in text_lower:
        bs["can_escape"] = False
        print(f"{Fore.RED}[DEBUFF] –ü–æ–±–µ–≥ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω!{Fore.RESET}")
    
    # –ü–æ—è—Å —Å –∑–µ–ª—å—è–º–∏
    if "–ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ –ª–æ–≤–∫–æ —Å—Ä–µ–∑–∞–ª –≤–∞—à –ø–æ—è—Å —Å –∑–µ–ª—å—è–º–∏" in text_lower:
        bs["has_belt"] = False
        bs["potion_count"] = 0
        print(f"{Fore.RED}[EVENT] –ü–æ—è—Å —Å—Ä–µ–∑–∞–Ω! –ó–µ–ª—å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã{Fore.RESET}")
    
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–µ–ª–∏–π
    if potion_match := re.search(r'–Ω–∞ –ø–æ—è—Å–µ –æ—Å—Ç–∞–ª–æ—Å—å (\d+) –∑–µ–ª', text_lower):
        bs["potion_count"] = int(potion_match.group(1))
def is_player_turn(buttons) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å–µ–π—á–∞—Å —Ö–æ–¥ –∏–≥—Ä–æ–∫–∞"""
    if not buttons:
        return False
    
    action_labels = ["–∞—Ç–∞–∫–∞", "—Å–ª–µ–ø–æ—Ç–∞", "—Ä–∞—Å—Å–µ—á–µ–Ω–∏–µ", "–∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "—Å–±–µ–∂–∞—Ç—å", "–∑–µ–ª—å–µ", "—Å–≤–µ—Ç", "#"]
    return any(any(label in b["label"].lower() for label in action_labels) for b in buttons)
def try_escape(buttons):
    """–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–±–µ–≥–∞"""
    bs = BATTLE_STATE
    
    if not bs["can_escape"]:
        return False
    
    # –£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–≥–∞ (—Å–ª–æ–∂–Ω–æ–µ)
    condition1 = bs["enemy_hp"] > 40 and bs["player_skill_hit"] > 80 and not bs["has_belt"]
    condition2 = bs["enemy_hp"] > 20 and bs["player_skill_hit"] > 65 and not bs["has_belt"]
    condition3 = bs["enemy_hp"] > 10 and bs["player_skill_hit"] < 65
    
    should_escape = bs["player_hp"] < 15 and (condition1 or condition2 or condition3)
    
    if should_escape:
        print(f"{Fore.RED}[EXTRA] –ü–û–ë–ï–ì! HP={bs['player_hp']}% –í—Ä–∞–≥={bs['enemy_hp']}%{Fore.RESET}")
        
        idx = find_button_index(buttons, "–°–±–µ–∂–∞—Ç—å")
        if idx is not None:
            time.sleep(1.5)
            apply_button_index(idx, iid)
            time.sleep(2)
            send_message(vk, "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å")
            bs["extra_action_used"] = True
            return True
    
    return False
def try_potion(buttons, message_id):
    """–ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–µ–ª—å—è"""
    bs = BATTLE_STATE
    
    if not bs["has_belt"] or bs["potion_count"] <= 0:
        return False
    
    should_use = bs["player_hp"] < 60
    
    if should_use:
        print(f"{Fore.GREEN}[EXTRA] –ó–ï–õ–¨–ï! HP={bs['player_hp']}%{Fore.RESET}")
        
        idx = find_button_index(buttons, "–ó–µ–ª—å–µ")
        if idx is not None:
            time.sleep(1.5)
            apply_button_index(idx, iid)
            
            # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –∑–µ–ª—å—è
            bs["waiting_potion_select"] = True
            bs["extra_action_used"] = True
            return True
    
    return False
def try_light(buttons):
    """–ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≤–µ—Ç–∞"""
    bs = BATTLE_STATE
    
    should_use = bs["enemy_hp"] < 25
    
    if should_use:
        print(f"{Fore.CYAN}[EXTRA] –°–í–ï–¢! –í—Ä–∞–≥ HP={bs['enemy_hp']}%{Fore.RESET}")
        
        idx = find_button_index(buttons, "—Å–≤–µ—Ç")
        if idx is not None:
            time.sleep(1.5)
            apply_button_index(idx, iid)
            bs["extra_action_used"] = True
            return True
    
    return False
def try_stance(buttons, message_id):
    """–ü–æ–ø—ã—Ç–∫–∞ —Å–º–µ–Ω—ã —Å—Ç–æ–π–∫–∏ (#)"""
    bs = BATTLE_STATE
    
    if bs["turn"] != 1:
        return False
    
    idx = find_button_index(buttons, "#")
    if idx is None:
        return False
    
    time.sleep(1.5)
    apply_button_index(idx, iid)
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ —Å—Ç–æ–π–∫–∏
    bs["waiting_stance_select"] = True
    bs["extra_action_used"] = True
    
    print(f"{Fore.YELLOW}[EXTRA] –ù–∞–∂–∞–ª–∏ #, –∂–¥–µ–º –≤—ã–±–æ—Ä —Å—Ç–æ–π–∫–∏{Fore.RESET}")
    return True
def choose_main_action(buttons):
    """–í—ã–±–æ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è"""
    bs = BATTLE_STATE
    
    if not buttons:
        return None
    
    # –ò—Å—Ü–µ–ª–µ–Ω–∏–µ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –µ—Å–ª–∏ HP –Ω–∏–∑–∫–æ–µ)
    if bs["player_hp"] < 55 and not bs["skill_blocked"]:
        if find_button_index(buttons, "–∏—Å—Ü–µ–ª–µ–Ω–∏–µ") is not None:
            print(f"{Fore.GREEN}[ACTION] –ò—Å—Ü–µ–ª–µ–Ω–∏–µ (HP {bs['player_hp']}%){Fore.RESET}")
            return "heal"
    
    # –°–ª–µ–ø–æ—Ç–∞ (–µ—Å–ª–∏ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∏–∑–∫–∞—è)
    if bs["player_accuracy"] < 75 and not bs["skill_blocked"]:
        if find_button_index(buttons, "–°–ª–µ–ø–æ—Ç–∞") is not None:
            print(f"{Fore.MAGENTA}[ACTION] –°–ª–µ–ø–æ—Ç–∞ (—Ç–æ—á–Ω–æ—Å—Ç—å {bs['player_accuracy']}%){Fore.RESET}")
            return "blind"
    
    # –†–∞—Å—Å–µ—á–µ–Ω–∏–µ (–æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–≤—ã–∫)
    if not bs["skill_blocked"]:
        if find_button_index(buttons, "–†–∞—Å—Å–µ—á–µ–Ω–∏–µ") is not None:
            print(f"{Fore.MAGENTA}[ACTION] –†–∞—Å—Å–µ—á–µ–Ω–∏–µ{Fore.RESET}")
            return "cleave"
    
    # –°–ª–µ–ø–æ—Ç–∞ (–µ—Å–ª–∏ –Ω–µ—Ç —Ä–∞—Å—Å–µ—á–µ–Ω–∏—è)
    if not bs["skill_blocked"]:
        if find_button_index(buttons, "–°–ª–µ–ø–æ—Ç–∞") is not None:
            print(f"{Fore.MAGENTA}[ACTION] –°–ª–µ–ø–æ—Ç–∞{Fore.RESET}")
            return "blind"
    
    # –ê—Ç–∞–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    print(f"{Fore.WHITE}[ACTION] –ê—Ç–∞–∫–∞{Fore.RESET}")
    return "attack"
def execute_main_action(action, buttons):
    """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è"""
    if not action:
        return
    
    action_map = {
        "heal": "–∏—Å—Ü–µ–ª–µ–Ω–∏–µ",
        "blind": "–°–ª–µ–ø–æ—Ç–∞",
        "cleave": "–†–∞—Å—Å–µ—á–µ–Ω–∏–µ",
        "attack": "–ê—Ç–∞–∫–∞"
    }
    
    button_name = action_map.get(action)
    if button_name:
        idx = find_button_index(buttons, button_name)
        if idx is not None:
            time.sleep(1.5)
            apply_button_index(idx, iid)
def handle_potion_selection(text, message_id):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∑–µ–ª—å—è –∏–∑ inline –º–µ–Ω—é"""
    bs = BATTLE_STATE
    
    if "–Ω–∞ –ø–æ—è—Å–µ –æ—Å—Ç–∞–ª–æ—Å—å" in text.lower():
        print(f"{Fore.CYAN}[INLINE] –í—ã–±–∏—Ä–∞–µ–º '–ò–¥–µ–∞–ª—å–Ω–æ–µ –∑–µ–ª—å–µ'{Fore.RESET}")
        
        # –ò—â–µ–º –∏ –Ω–∞–∂–∏–º–∞–µ–º inline –∫–Ω–æ–ø–∫—É
        success = find_and_press_inline(vk, message_id, "–ò–¥–µa–ª—å–Ω–æ–µ", iid)
        
        if success:
            bs["waiting_potion_select"] = False
            bs["potion_count"] -= 1
            return True
    
    return False
def handle_stance_selection(text, message_id):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç–æ–π–∫–∏ –∏–∑ inline –º–µ–Ω—é"""
    bs = BATTLE_STATE
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø—Ä–∏—à–ª–æ –º–µ–Ω—é —Å—Ç–æ–µ–∫ (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç)
    # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Å—Ç–æ –Ω–∞–ª–∏—á–∏–µ inline –∫–Ω–æ–ø–æ–∫ —Å–æ —Å—Ç–æ–π–∫–∞–º–∏
    
    # –í—ã–±–æ—Ä —Å—Ç–æ–π–∫–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
    if bs["enemy_armor"] > 29 and bs["player_accuracy"] > 70:
        stance = "–î—Ä–æ–±—è—â–∏–π"
        print(f"{Fore.YELLOW}[INLINE] –°–¢–û–ô–ö–ê: –î—Ä–æ–±—è—â–∞—è (–±—Ä–æ–Ω—è {bs['enemy_armor']}%){Fore.RESET}")
    elif bs["player_accuracy"] < 60:
        stance = "–†–µ–∂—É—â–∏–π"
        print(f"{Fore.YELLOW}[INLINE] –°–¢–û–ô–ö–ê: –†–µ–∂—É—â–∞—è (—Ç–æ—á–Ω–æ—Å—Ç—å {bs['player_accuracy']}%){Fore.RESET}")
    elif bs["player_accuracy"] > 96:
        stance = "–ö–æ–ª—é—â–∏–π"
        print(f"{Fore.YELLOW}[INLINE] –°–¢–û–ô–ö–ê: –ö–æ–ª—é—â–∞—è (—Ç–æ—á–Ω–æ—Å—Ç—å {bs['player_accuracy']}%){Fore.RESET}")
    elif bs["player_accuracy"] > 70 and bs["enemy_armor"] < 30:
        stance = "–†—É–±—è—â–∏–π"
        print(f"{Fore.YELLOW}[INLINE] –°–¢–û–ô–ö–ê: –†—É–±—è—â–∞—è (—Ç–æ—á–Ω–æ—Å—Ç—å {bs['player_accuracy']}%){Fore.RESET}")
    else:
        stance = "–†—É–±—è—â–∞—è"  # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è
        print(f"{Fore.YELLOW}[INLINE] –°–¢–û–ô–ö–ê: –†—É–±—è—â–∞—è (—Å—Ç–∞–Ω–¥–∞—Ä—Ç){Fore.RESET}")
    
    # –ò—â–µ–º –∏ –Ω–∞–∂–∏–º–∞–µ–º inline –∫–Ω–æ–ø–∫—É —Å—Ç–æ–π–∫–∏
    success = find_and_press_inline(vk, message_id, stance, iid)
    
    if success:
        bs["waiting_stance_select"] = False
        return True
    
    return False
def handle_battle(text, buttons, message_id):
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ—è"""
    bs = BATTLE_STATE
    
    if not bs["active"]:
        return
    
    # –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–æ—è
    if is_battle_end(text):
        print(f"{Fore.GREEN}[BATTLE END] –ë–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!{Fore.RESET}")
        bs["active"] = False
        bs["turn"] = 0
        return
    
    # –®–∞–≥ 2: –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    parse_battle_state(text)
    
    # –®–∞–≥ 3: –ü—Ä–æ–ø—É—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏—è
    if should_skip_message(text):
        print(f"{Fore.YELLOW}[SKIP] –°–æ–æ–±—â–µ–Ω–∏–µ —Å üí¨{Fore.RESET}")
        return
    
    # –®–∞–≥ 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ inline –≤—ã–±–æ—Ä–∞ (–µ—Å–ª–∏ –∂–¥–µ–º)
    if bs["waiting_potion_select"]:
        if handle_potion_selection(text, message_id):
            return
    
    if bs["waiting_stance_select"]:
        if handle_stance_selection(text, message_id):
            return
    
    # –®–∞–≥ 5: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
    if not bs["extra_action_used"] and not bs["extra_action_blocked"]:
        if try_escape(buttons):
            return
        if try_potion(buttons, message_id):
            return
        if try_light(buttons):
            return
        if try_stance(buttons, message_id):
            return
    
    # –®–∞–≥ 6: –û—Å–Ω–æ–≤–Ω–æ–π —Ö–æ–¥
    if not is_player_turn(buttons):
        return
    
    print(f"\n{Fore.MAGENTA}{'='*70}")
    print(f"[TURN {bs['turn']}] –í—Ä–∞–≥: {bs['enemy_hp']}% | –ò–≥—Ä–æ–∫: {bs['player_hp']}%")
    print(f"{'='*70}{Fore.RESET}")
    
    action = choose_main_action(buttons)
    execute_main_action(action, buttons)
    
    # –®–∞–≥ 7: –°–±—Ä–æ—Å —Ñ–ª–∞–≥–æ–≤ –í –ö–û–ù–¶–ï –•–û–î–ê
    bs["extra_action_used"] = False
    bs["skill_blocked"] = False  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–µ–±–∞—Ñ—Ñ—ã
    bs["extra_action_blocked"] = False
    bs["can_escape"] = True  # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ –¥–µ—Ñ–æ–ª—Ç
    bs["turn"] += 1
# ==================== –°–û–ë–´–¢–ò–Ø ====================
# –ò—Å—Ç–æ—á–Ω–∏–∫
water = 0
def fountain(text):
    global water
    patterns = [
    re.compile(r"–≤—ã –ø–æ–ª—É—á–∏–ª–∏:.*–ø–µ—Ä–≤–æ–∑–¥–∞–Ω–Ω–∞—è –≤–æ–¥–∞!", re.I),
    re.compile(r"‚åõ–≤—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞:\s*\d+\s*—á–∞—Å", re.I),
    re.compile(r"–Ω–∞–±–∏—Ä–∞—è –≤–æ–¥—É, –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏ –∫–∞–∫–æ–π-—Ç–æ —Å–≤–µ—Ä—Ç–æ–∫", re.I),
]
    for pattern in patterns:
        if pattern.search(text):
            apply_button_index(1, iid) 
            time.sleep(3)
            water += 1
            print(f"–í–æ–¥—ã: {water}")
            if water >= 5:
                profile.use_item(ItemId.Water, action=1, count=1)
                water = 0
# –ú—É–¥—Ä–µ—Ü
def Sagestart(text):
    if "–ë—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã, –Ω–∞ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç —É –≤–∞—Å –µ—Å—Ç—å".lower() in text:
        Eventstatus["SageActive"] = True
        return 
    if "–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ".lower() in text:
        Eventstatus["SageActive"] = False
        return
    if Eventstatus["SageActive"] == True:
        for key, replies in SageTest.items():
                if key.lower() in text:
                        time.sleep(3)
                        send_message(vk, replies)
                        return
#–ü–µ—â–µ—Ä–∞ —á—É–¥–µ—Å
def pattern_to_regex(pattern):
    regex = ""
    for char in pattern.strip().lower():
        if char == '‚ñ†':
            regex += "."
        elif char == ' ':
            regex += " "
        else:
            regex += char
    return "^" + regex + "$"
def find_candidates(pattern):
    regex = pattern_to_regex(pattern)
    return [answer for answer in ANSWERS if re.match(regex, answer.lower())]
def get_best_letter(candidates, pattern):
    unknown_positions = [i for i, char in enumerate(pattern) if char == '‚ñ†']
    if not unknown_positions:
        return None
        
    letter_scores = {}
    for pos in unknown_positions:
        letters_at_pos = [cand.lower()[pos] for cand in candidates if pos < len(cand)]
        for letter in set(letters_at_pos):
            if letter in TRIED_LETTERS:
                continue
            count = letters_at_pos.count(letter)
            score = min(count, len(candidates) - count)
            if letter not in letter_scores:
                letter_scores[letter] = 0
            letter_scores[letter] += score
    
    if letter_scores:
        best = max(letter_scores, key=letter_scores.get)
        TRIED_LETTERS.add(best)
        return best
    return None
def solve_puzzle(pattern):
    global TRIED_LETTERS
    candidates = find_candidates(pattern)
    
    if len(candidates) == 0:
        return None, None
    if len(candidates) == 1:
        TRIED_LETTERS.clear()
        return candidates[0], None
        
    best_letter = get_best_letter(candidates, pattern)
    if best_letter is None:
        TRIED_LETTERS.clear()
        best_letter = get_best_letter(candidates, pattern)
    return None, best_letter
#–ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫
def find_event_by_phrase(phrase):
    def _normalize(s):
        s = s.lower()
        s = s.replace('&quot;', '"')
        s = re.sub(r"[^\w–∞-—è—ë\s]", '', s)
        s = re.sub(r"\s+", ' ', s).strip()
        return s

    phrase_norm = _normalize(phrase)
    
    for event, phrases in crossroad.items():
        for p in phrases:
            if _normalize(p) == phrase_norm:
                return event
    
    print(f"[WARNING] –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Ñ—Ä–∞–∑–∞: '{phrase}'")
    return None
def choose_best_path(text):
    paths = {
        "–ó–∞–ø–∞–¥": [],
        "–°–µ–≤–µ—Ä": [],
        "–í–æ—Å—Ç–æ–∫": []
    }
    
    west_match = re.search(r'–ó–∞–ø–∞–¥–Ω—ã–π –ø—É—Ç—å:\s*(.+?)(?=–°–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å:|–í–æ—Å—Ç–æ—á–Ω—ã–π –ø—É—Ç—å:|–û—Å—Ç–∞–ª–æ—Å—å –≤—ã–±—Ä–∞—Ç—å|$)', text, re.IGNORECASE | re.DOTALL)
    north_match = re.search(r'–°–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å:\s*(.+?)(?=–ó–∞–ø–∞–¥–Ω—ã–π –ø—É—Ç—å:|–í–æ—Å—Ç–æ—á–Ω—ã–π –ø—É—Ç—å:|–û—Å—Ç–∞–ª–æ—Å—å –≤—ã–±—Ä–∞—Ç—å|$)', text, re.IGNORECASE | re.DOTALL)
    east_match = re.search(r'–í–æ—Å—Ç–æ—á–Ω—ã–π –ø—É—Ç—å:\s*(.+?)(?=–ó–∞–ø–∞–¥–Ω—ã–π –ø—É—Ç—å:|–°–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å:|–û—Å—Ç–∞–ª–æ—Å—å –≤—ã–±—Ä–∞—Ç—å|$)', text, re.IGNORECASE | re.DOTALL)
    
    matches = {
        "–ó–∞–ø–∞–¥": west_match,
        "–°–µ–≤–µ—Ä": north_match,
        "–í–æ—Å—Ç–æ–∫": east_match
    }
    
    for direction, match in matches.items():
        if match:
            path_text = match.group(1)
            matches_quotes = re.finditer(r'&quot;([^&]+)&quot;|[""]([^""]+)[""]', path_text, flags=re.DOTALL)
            quotes = [m.group(1) or m.group(2) for m in matches_quotes]
            
            print(f"[DEBUG] {direction}: –Ω–∞–π–¥–µ–Ω–æ —Ñ—Ä–∞–∑: {quotes}")
            
            for quote in quotes:
                event = find_event_by_phrase(quote)
                if event:
                    paths[direction].append(event)
                    print(f"[CROSSROAD] {direction}: '{quote}' -> {event}")
    
    best_direction = None
    best_priority = 999
    
    for direction, events in paths.items():
        if not events:
            print(f"[CROSSROAD] {direction}: –Ω–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π")
            continue
        
        min_priority = min([crossroad_PRIORITY.get(event, 999) for event in events])
        best_event = [e for e in events if crossroad_PRIORITY.get(e, 999) == min_priority][0]
        
        print(f"[CROSSROAD] {direction}: —Å–æ–±—ã—Ç–∏—è {events}, –ª—É—á—à–µ–µ '{best_event}' (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç {min_priority})")
        
        if min_priority < best_priority:
            best_priority = min_priority
            best_direction = direction
    
    return best_direction
#Lights Out 3x3
TARGET = (1 << 9) - 1
def flip_mask(i: int) -> int:
    r, c = divmod(i, 3)
    m = 0
    for dr, dc in [(0, 0), (0, 1), (0, -1), (1, 0), (-1, 0)]:
        nr, nc = r + dr, c + dc
        if 0 <= nr < 3 and 0 <= nc < 3:
            m |= 1 << (nr * 3 + nc)
    return m
def buttons_to_state(buttons) -> int:
    state = 0
    for i, b in enumerate(buttons):
        if b["label"].startswith("‚úÖ"):
            state |= 1 << i
    return state
def solve_lights_out(buttons):
    state = buttons_to_state(buttons)
    for press in range(512):
        s = state
        for i in range(9):
            if (press >> i) & 1:
                s ^= flip_mask(i)
        if s == TARGET:
            solution = [i for i in range(9) if (press >> i) & 1]
            solution.reverse()
            return solution
    return []
#–†—É–Ω–Ω—ã–π –∫–∞–º–µ–Ω—å
MEMORY_STATE = {
    "memory": {}, "i": 0, "step1_pressed": False, "step2_pressed": False,
    "step1_index": None, "step2_index": None
}
NEEDED_BUTTONS = {"üçñ","üíñ","üëù"}
def reset_memory_state():
    global MEMORY_STATE
    MEMORY_STATE = {
        "memory": {}, "i": 0, "step1_pressed": False, "step2_pressed": False,
        "step1_index": None, "step2_index": None
    }
def memory_step(peer_id):
    global MEMORY_STATE, LAST_BUTTONS
    if len(LAST_BUTTONS) != 13:
        return False

    buttons = LAST_BUTTONS
    memory = MEMORY_STATE["memory"]
    i = MEMORY_STATE["i"]

    for label, indexes in memory.items():
        if len(indexes) >= 2 and label in NEEDED_BUTTONS:
            idx1, idx2 = indexes[0], indexes[1]

            if not MEMORY_STATE["step1_pressed"] and not MEMORY_STATE["step2_pressed"]:
                apply_button_index(idx1, peer_id)
                MEMORY_STATE["step1_pressed"] = True
                MEMORY_STATE["step1_index"] = idx1
                return True

            if MEMORY_STATE["step1_pressed"] and not MEMORY_STATE["step2_pressed"]:
                apply_button_index(idx2, peer_id)
                MEMORY_STATE["step2_pressed"] = True
                MEMORY_STATE["step2_index"] = idx2
                return True

            if MEMORY_STATE["step1_pressed"] and MEMORY_STATE["step2_pressed"]:
                del memory[label]
                MEMORY_STATE["step1_pressed"] = False
                MEMORY_STATE["step2_pressed"] = False
                MEMORY_STATE["step1_index"] = None
                MEMORY_STATE["step2_index"] = None
                return True

    if i >= 12:
        MEMORY_STATE["i"] = 0
        return False

    idx1, idx2 = i, i + 1

    if not MEMORY_STATE["step1_pressed"] and not MEMORY_STATE["step2_pressed"]:
        apply_button_index(idx1, peer_id)
        MEMORY_STATE["step1_pressed"] = True
        MEMORY_STATE["step1_index"] = idx1
        return True

    if MEMORY_STATE["step1_pressed"] and not MEMORY_STATE["step2_pressed"]:
        apply_button_index(idx2, peer_id)
        MEMORY_STATE["step2_pressed"] = True
        MEMORY_STATE["step2_index"] = idx2
        return True

    if MEMORY_STATE["step1_pressed"] and MEMORY_STATE["step2_pressed"]:
        label1 = buttons[MEMORY_STATE["step1_index"]].get("label")
        label2 = buttons[MEMORY_STATE["step2_index"]].get("label")

        memory.setdefault(label1, []).append(MEMORY_STATE["step1_index"])
        memory.setdefault(label2, []).append(MEMORY_STATE["step2_index"])

        MEMORY_STATE["step1_pressed"] = False
        MEMORY_STATE["step2_pressed"] = False
        MEMORY_STATE["step1_index"] = None
        MEMORY_STATE["step2_index"] = None
        MEMORY_STATE["i"] += 2
        return True

    return False
# –¢–æ—Ä–≥–æ–≤–≤–µ—Ü
BB = True
DEALER_LIST = ["–°–ª–∞–±–æ–µ –∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "–†—ã–±–∞–∫", "–°—É–µ–≤–µ—Ä–Ω–æ—Å—Ç—å", "–ù–µ—É—è–∑–≤–∏–º—ã–π", "—Ä–∞—Å—Å–µ—á–µ–Ω–∏–µ", "–ö–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∞", "–ì–ª–∞–¥–∏–∞—Ç–æ—Ä"]
def dealer(text, iid):
    global BB
    if "üåï—Ü–µ–Ω–∞:".lower() in text:
        s = re.search(r'üëù\d+\*([^\n-]+)\s*-\s*([^\n]+)', text, re.IGNORECASE)
        if s:
            item_type = s.group(1).strip()
            item_name = s.group(2).strip()
            print(f'{Fore.MAGENTA}{item_type}{Fore.RESET}')
            print(f'{Fore.MAGENTA}{item_name}{Fore.RESET}')

            if item_name in DEALER_LIST:
                BB = False
                print(f'{Fore.MAGENTA}–ü—Ä–µ–¥–º–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω{Fore.RESET}')
            else:
                BB = True
            
    if "–í–∞–º —Å–≤–æ–π —Ç–æ–≤–∞—Ä –ø–æ –æ—á–µ–Ω—å –∑–∞–º–∞–Ω—á–∏–≤—ã–º —Ü–µ–Ω–∞–º.".lower() in text or "–ü–æ —â–µ–ª—á–∫—É –∫–æ—Å—Ç–ª—è–≤—ã—Ö –ø–∞–ª—å—Ü–µ–≤".lower() in text:
        if BB == False:
            apply_button_index(0, iid)
            BB = True
        else:
            apply_button_index(1, iid)
# –ß–µ—Ä–µ–ø/–ö–∞–∑–∏–Ω–æ
def handle_well_event(text, original_text):
    signs = ['üëë', '‚≠ê', 'üíé', 'üç•', 'üíç']

    # –ü–∞—Ä—Å–∏–º HP –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    hp_match = re.search(r'üíö–ü–µ—Ä—Å–æ–Ω–∞–∂: (\d+)', original_text)
    hp = int(hp_match.group(1)) if hp_match else None

    # –ü–∞—Ä—Å–∏–º —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –∑–¥–æ—Ä–æ–≤—å—è
    hp_needed_match = re.search(r'(\d+) –∑–¥–æ—Ä–æ–≤—å—è', original_text)
    hp_needed = int(hp_needed_match.group(1)) if hp_needed_match else None

    print(f"–ó–¥–æ—Ä–æ–≤—å—è: {hp}, –∞ –Ω–∞–¥–æ: {hp_needed}")

    if hp is not None and hp_needed is not None and hp <= hp_needed:
        send_message(vk, "–£–π—Ç–∏")
        return

    # –ë–µ—Ä—ë–º 4-—é —Å—Ç—Ä–æ–∫—É —Å –∫–æ–Ω—Ü–∞
    lines = original_text.split('\n')
    idx = len(lines) - 4
    line = lines[idx] if idx >= 0 else ""

    # –£–±–∏—Ä–∞–µ–º —Å–∫–æ–±–∫–∏ –∏ —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —Å–∏–º–≤–æ–ª—ã (emoji)
    line = line.replace("(", "").replace(")", "").strip()
    current_signs = list(line)  # —Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤/—ç–º–æ–¥–∑–∏

    if not current_signs:
        return

    is_special = current_signs[0] in signs
    all_same = current_signs[-1] == current_signs[0]

    go_next = (
        (len(current_signs) == 1 and is_special) or
        (len(current_signs) > 1 and all_same)
    )

    send_message(vk, "–î–∞–ª—å—à–µ" if go_next else f"{hp_needed}ü©∏")

# ==================== –õ–ê–ë–ò–†–ò–ù–¢ (–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π DFS) ====================
DIRECTION_DELTA = {
    "–ù–∞ —Å–µ–≤–µ—Ä": (0, -1),
    "–ù–∞ —é–≥":    (0,  1),
    "–ù–∞ –≤–æ—Å—Ç–æ–∫":(1,  0),
    "–ù–∞ –∑–∞–ø–∞–¥": (-1, 0),
}
OPPOSITE = {
    "–ù–∞ —Å–µ–≤–µ—Ä": "–ù–∞ —é–≥",
    "–ù–∞ —é–≥":    "–ù–∞ —Å–µ–≤–µ—Ä",
    "–ù–∞ –≤–æ—Å—Ç–æ–∫":"–ù–∞ –∑–∞–ø–∞–¥",
    "–ù–∞ –∑–∞–ø–∞–¥": "–ù–∞ –≤–æ—Å—Ç–æ–∫",
}
DIR_ORDER = ["–ù–∞ —é–≥", "–ù–∞ –≤–æ—Å—Ç–æ–∫", "–ù–∞ —Å–µ–≤–µ—Ä", "–ù–∞ –∑–∞–ø–∞–¥"]
LAB = {
    "active":       False,
    "x":            0,
    "y":            0,
    "visited":      set(),       # –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ (x, y)
    "tried":        {},          # {(x,y): set(–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π)} ‚Äî —á—Ç–æ —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª–∏
    "stack":        [],          # [(x, y, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ_–∫–æ—Ç–æ—Ä—ã–º_–ø—Ä–∏—à–ª–∏)] ‚Äî –¥–ª—è –æ—Ç–∫–∞—Ç–∞
    "wind_ns":      None,        # "–ù–∞ —Å–µ–≤–µ—Ä" / "–ù–∞ —é–≥"
    "wind_ew":      None,        # "–ù–∞ –≤–æ—Å—Ç–æ–∫" / "–ù–∞ –∑–∞–ø–∞–¥"
}
def lab_reset():
    LAB.update({
        "active": True,
        "x": 0, "y": 0,
        "visited": set(),
        "tried": {},
        "stack": [],
        "wind_ns": None,
        "wind_ew": None,
    })
def lab_parse_wind(text):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç wind_ns –∏ wind_ew –∏–∑ —Ç–µ–∫—Å—Ç–∞."""
    WIND_MAP = {
        "—Å–µ–≤–µ—Ä–∞":         ("–ù–∞ —Å–µ–≤–µ—Ä", None),
        "—é–≥–∞":            ("–ù–∞ —é–≥",    None),
        "–≤–æ—Å—Ç–æ–∫–∞":        (None, "–ù–∞ –≤–æ—Å—Ç–æ–∫"),
        "–∑–∞–ø–∞–¥–∞":         (None, "–ù–∞ –∑–∞–ø–∞–¥"),
        "—Å–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ–∫–∞": ("–ù–∞ —Å–µ–≤–µ—Ä", "–ù–∞ –≤–æ—Å—Ç–æ–∫"),
        "—Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥–∞":  ("–ù–∞ —Å–µ–≤–µ—Ä", "–ù–∞ –∑–∞–ø–∞–¥"),
        "—é–≥–æ-–≤–æ—Å—Ç–æ–∫–∞":    ("–ù–∞ —é–≥",    "–ù–∞ –≤–æ—Å—Ç–æ–∫"),
        "—é–≥–æ-–∑–∞–ø–∞–¥–∞":     ("–ù–∞ —é–≥",    "–ù–∞ –∑–∞–ø–∞–¥"),
    }
    m = re.search(r'–≤–µ—Ç–µ—Ä –¥—É–µ—Ç –æ—Ç–∫—É–¥–∞.—Ç–æ —Å ([–∞-—è—ë\-]+)', text.lower())
    if m:
        raw = m.group(1).strip().rstrip('.')
        ns, ew = WIND_MAP.get(raw, (None, None))
        LAB["wind_ns"] = ns
        LAB["wind_ew"] = ew
def lab_get_green(buttons):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–µ–ª—ë–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π."""
    result = []
    for name in DIRECTION_DELTA:
        idx = find_button_index(buttons, name)
        if idx is not None and buttons[idx].get("color") == "positive":
            result.append(name)
    return result
def lab_sort_by_wind(directions):
    def priority(d):
        if d == LAB["wind_ns"]:
            return 0   # —Ç–æ—á–Ω–æ –ø–æ –≤–µ—Ç—Ä—É ‚Äî –ø–µ—Ä–≤—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
        if d == LAB["wind_ew"]:
            return 1   # –≤—Ç–æ—Ä–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–µ—Ç—Ä–∞
        return 2       # –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ
    return sorted(directions, key=priority)
def lab_move(direction, buttons, peer_id):
    """–î–µ–ª–∞–µ—Ç —à–∞–≥ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã."""
    idx = find_button_index(buttons, direction)
    if idx is None:
        return False
    time.sleep(2)
    apply_button_index(idx, peer_id)
    dx, dy = DIRECTION_DELTA[direction]
    LAB["x"] += dx
    LAB["y"] += dy
    print(f"{Fore.CYAN}[DFS] –ò–¥—ë–º {direction} ‚Üí ({LAB['x']}, {LAB['y']}){Fore.RESET}")
    return True
def handle_labyrinth(text, buttons, apply_fn, peer_id):
    """–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π DFS –ø–æ –ª–∞–±–∏—Ä–∏–Ω—Ç—É."""
    global LAB
    text_lo = text.lower()

    # ‚îÄ‚îÄ –ù–û–í–û–ï: –µ—Å–ª–∏ –Ω–µ—Ç –∫–Ω–æ–ø–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚Äî —ç—Ç–æ –Ω–µ –ª–∞–±–∏—Ä–∏–Ω—Ç–Ω—ã–π —Ö–æ–¥ ‚îÄ‚îÄ
    has_dir_buttons = any(b.get("label", "").startswith("–ù–∞ ") for b in buttons)
    if not has_dir_buttons:
        return False
        
    # ‚îÄ‚îÄ –ê–∫—Ç–∏–≤–∞—Ü–∏—è ‚îÄ‚îÄ
    is_lab = (
        "–ª–∞–±–∏—Ä–∏–Ω—Ç" in text_lo or
        "–≤–µ—Ç–µ—Ä –¥—É–µ—Ç" in text_lo or
        "—Å–æ–≤—Å–µ–º –±–ª–∏–∑–∫–æ" in text_lo or
        "–±–µ—Ä–µ—Ç –Ω–∞—á–∞–ª–æ" in text_lo
    )
    has_dir_buttons = any(
        b.get("label", "").startswith("–ù–∞ ")
        for b in buttons
    )
    if is_lab and has_dir_buttons and not LAB["active"]:
        lab_reset()
        print(f"{Fore.MAGENTA}[DFS] –õ–∞–±–∏—Ä–∏–Ω—Ç –Ω–∞—á–∞—Ç! –°—Ç–∞—Ä—Ç (0,0){Fore.RESET}")

    if not LAB["active"]:
        return False

    # ‚îÄ‚îÄ –í—ã—Ö–æ–¥ –Ω–∞–π–¥–µ–Ω ‚îÄ‚îÄ
    if any(x in text_lo for x in [" –í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ—Å—å —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª...", "–í—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞—à–ª–∏ –≤—ã—Ö–æ–¥", "üö©–õ–æ–∫a—Ü–∏—è"]):
        print(f"{Fore.GREEN}[DFS] –í—ã—Ö–æ–¥ –Ω–∞–π–¥–µ–Ω!{Fore.RESET}")
        LAB["active"] = False
        return True

    # ‚îÄ‚îÄ –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ç–µ—Ä ‚îÄ‚îÄ
    lab_parse_wind(text)

    pos = (LAB["x"], LAB["y"])

    # ‚îÄ‚îÄ –ü–æ–º–µ—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–ª–µ—Ç–∫—É –∫–∞–∫ –ø–æ—Å–µ—â—ë–Ω–Ω—É—é ‚îÄ‚îÄ
    LAB["visited"].add(pos)
    if pos not in LAB["tried"]:
        LAB["tried"][pos] = set()

    # ‚îÄ‚îÄ –ó–µ–ª—ë–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑ —Ç–µ–∫—É—â–µ–π –∫–ª–µ—Ç–∫–∏ ‚îÄ‚îÄ
    green = lab_get_green(buttons)

    # ‚îÄ‚îÄ –ò—Å–∫–ª—é—á–∞–µ–º —É–∂–µ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Ç–µ —á—Ç–æ –≤–µ–¥—É—Ç –≤ –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ –∫–ª–µ—Ç–∫–∏ ‚îÄ‚îÄ
    untried = []
    for d in green:
        if d in LAB["tried"][pos]:
            continue
        dx, dy = DIRECTION_DELTA[d]
        next_pos = (LAB["x"] + dx, LAB["y"] + dy)
        if next_pos in LAB["visited"]:
            LAB["tried"][pos].add(d)  # –Ω–µ –∏–¥—ë–º –≤ —É–∂–µ –ø–æ—Å–µ—â—ë–Ω–Ω—É—é
            continue
        untried.append(d)

    # ‚îÄ‚îÄ –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤–µ—Ç—Ä—É ‚îÄ‚îÄ
    untried = lab_sort_by_wind(untried)

    print(f"{Fore.MAGENTA}[DFS] pos={pos} green={green} untried={untried} stack_len={len(LAB['stack'])}{Fore.RESET}")

    # ‚îÄ‚îÄ –ï—Å—Ç—å –∫—É–¥–∞ –∏–¥—Ç–∏ ‚îÄ‚îÄ 
    if untried:
        direction = untried[0]
        LAB["tried"][pos].add(direction)
        LAB["stack"].append((LAB["x"], LAB["y"], direction))
        lab_move(direction, buttons, peer_id)
        return True

    # ‚îÄ‚îÄ –¢—É–ø–∏–∫ ‚Äî –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è ‚îÄ‚îÄ
    if LAB["stack"]:
        prev_x, prev_y, came_from = LAB["stack"].pop()
        back = OPPOSITE[came_from]
        print(f"{Fore.YELLOW}[DFS] –¢—É–ø–∏–∫! –û—Ç–∫–∞—Ç {back} ‚Üí ({prev_x}, {prev_y}){Fore.RESET}")

        # –û—Ç–∫–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Å—Ç–µ–Ω–æ–π ‚Äî —Ç–æ–≥–¥–∞ –∏—â–µ–º –ª—é–±–æ–π –ø—É—Ç—å –Ω–∞–∑–∞–¥
        idx = find_button_index(buttons, back)
        if idx is not None and buttons[idx].get("color") == "positive":
            time.sleep(2)
            apply_button_index(idx, peer_id)
            LAB["x"] = prev_x
            LAB["y"] = prev_y
        else:
            # –°—Ç–µ–Ω–∞ –Ω–∞ –ø—É—Ç–∏ –Ω–∞–∑–∞–¥ ‚Äî –±–µ—Ä—ë–º –ª—é–±—É—é –∑–µ–ª—ë–Ω—É—é (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π)
            print(f"{Fore.RED}[DFS] –ü—É—Ç—å –Ω–∞–∑–∞–¥ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω! –õ—é–±–∞—è –∑–µ–ª—ë–Ω–∞—è{Fore.RESET}")
            for d in green:
                idx = find_button_index(buttons, d)
                if idx is not None and buttons[idx].get("color") == "positive":
                    time.sleep(2)
                    apply_button_index(idx, peer_id)
                    dx, dy = DIRECTION_DELTA[d]
                    LAB["x"] += dx
                    LAB["y"] += dy
                    break
        return True

    # ‚îÄ‚îÄ –°—Ç–µ–∫ –ø—É—Å—Ç ‚Äî –º—ã –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –∏ –≤—Å–µ –ø—É—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã ‚îÄ‚îÄ
    print(f"{Fore.RED}[DFS] –í—Å–µ –ø—É—Ç–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã!{Fore.RESET}")
    return True

# ==================== –í–´–ë–û–† –õ–û–ö–ê–¶–ò–ò –ò –¢–ê–ô–ú–ï–† ====================
def choose_location_action(buttons):
    if not isinstance(GAME_STATE["HP"], int):
        return find_button_index(buttons, "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å")
    elif GAME_STATE["HP"] < 60:
        return find_button_index(buttons, "–û—Ç–¥—ã—Ö")
    elif GAME_STATE["fish"] + GAME_STATE["meat"] > 0 and GAME_STATE["Hunger"] < 100 - ((GAME_STATE["fish"] * 4) + (GAME_STATE["meat"] * 4)):
        return find_button_index(buttons, "–û—Ç–¥—ã—Ö")
    else:
        return find_button_index(buttons, "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å")
BOT_STARTED_AT = time.time()
PORTAL_INTERVAL = 60 * 61 * 2

# ==================== –û–ë–†–ê–ë–û–¢–ö–ê –°–û–ë–´–¢–ò–ô ====================
def process_event(event):
    global waiting_location, waiting_since, LAST_UNPROCESSED_EVENT, BOT_STARTED_AT, New_items, hours, minutes, seconds
    
    now = time.time()
    elapsed = now - BOT_STARTED_AT
    remaining = max(0, PORTAL_INTERVAL - elapsed)
    hours = int(remaining // 3600)
    minutes = int((remaining % 3600) // 60)
    seconds = int(remaining % 60)

    # –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è
    if waiting_location and now - waiting_since >= WAIT_TIMEOUT:
        print(f"{Fore.GREEN}[TIMEOUT] –°–±–æ—Ä–∞ –Ω–µ—Ç{Fore.RESET}")
        if now - BOT_STARTED_AT >= PORTAL_INTERVAL:
            print(f"{Fore.GREEN}[PORTAL] –ë–æ—Ç –∏–¥—ë—Ç –∫—É—à–∞—Ç—å{Fore.RESET}")
            send_message(vk, "–í –ø–æ—Ä—Ç–∞–ª")
            time.sleep(45)
            send_message(vk, "–ü–æ—Ä—Ç–æ–≤—ã–π –∫–≤–∞—Ä—Ç–∞–ª")
            time.sleep(10)
            send_message(vk, "–¢–∞–≤–µ—Ä–Ω–∞")
            time.sleep(10)
            send_message(vk, "–ó–∞–∫–∞–∑–∞—Ç—å –µ–¥—É")
            time.sleep(10)
            send_message(vk, "–î–µ—à–µ–≤—ã–π –æ–±–µ–¥")
            time.sleep(10)
            send_message(vk, "–í –∫–æ–ª–æ–¥–µ—Ü")
            BOT_STARTED_AT = time.time()
            waiting_location = None
            GAME_STATE["Hunger"] = 100
        else:
            buttons = waiting_location["buttons"]
            idx = choose_location_action(buttons)
            apply_button_index(idx, iid, buttons=buttons)
            waiting_location = None

    if event.type == VkEventType.MESSAGE_NEW and event.to_me and event.peer_id == iid:
        LAST_UNPROCESSED_EVENT = {
            'text': event.text,
            'message_id': event.message_id,
            'timestamp': time.time()
        }
        
        original_text = event.text
        text = original_text.lower()
        #print(f"{Fore.YELLOW}[–°–æ–æ–±—â–µ–Ω–∏–µ: ] {original_text}{Fore.RESET}")
        update_game_state(text)
        get_buttons(vk, event.message_id)
        parse_new_item(event.text)
        buttons = get_buttons(vk, event.message_id)  # —É–∂–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
        has_fresh_buttons = len(buttons) > 0  
        # –ë–û–ô
        if BATTLE_STATE["active"] and is_battle_end(text):
            print(f"{Fore.GREEN}[BATTLE END]{Fore.RESET}")
            BATTLE_STATE["active"] = False
            BATTLE_STATE["turn"] = 0
            LAST_UNPROCESSED_EVENT = None
            return
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª–∞ –±–æ—è
        if is_battle_start(text) and not BATTLE_STATE["active"]:
            print(f"{Fore.MAGENTA}[BATTLE START]{Fore.RESET}")
            init_battle(text)
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –±–æ—è
        if BATTLE_STATE["active"]:
            handle_battle(text, LAST_BUTTONS, event.message_id)  # ‚Üê –í–û–¢ –≠–¢–û
            LAST_UNPROCESSED_EVENT = None
            return
                    
        # –ö–Ω–æ–ø–∫–∞ 1
        for a in Event1:
            if a.lower() in text:
                time.sleep(1)
                apply_button_index(0, iid)
                print(f"{Fore.CYAN}–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞  {a}  –¥–ª—è —Å–æ–±—ã—Ç–∏—è: {Event1} {Fore.RESET}")
                LAST_UNPROCESSED_EVENT = None  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
                return
        
        # –ö–Ω–æ–ø–∫–∞ 2
        for a in Event2:    
            if a.lower() in text:
                time.sleep(1)
                apply_button_index(1, iid)
                print(f"{Fore.CYAN}–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ 2 –¥–ª—è —Å–æ–±—ã—Ç–∏—è: {a}{Fore.RESET}")
                LAST_UNPROCESSED_EVENT = None  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
                return
        
        # –õ–∞–±–∏—Ä–∏–Ω—Ç
        if "–≤–µ—Ç–µ—Ä –¥—É–µ—Ç" in text or "—Å–æ–≤—Å–µ–º –±–ª–∏–∑–∫–æ" in text or "–±–µ—Ä–µ—Ç –Ω–∞—á–∞–ª–æ" in text or LAB["active"]:
            if has_fresh_buttons:  # ‚Üê —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑ —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
                if handle_labyrinth(original_text, LAST_BUTTONS, apply_button_index, iid):
                    LAST_UNPROCESSED_EVENT = None
                    return

        # –°–±–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤
        for action, triggers in Collection:
            if any(t.lower() in text for t in triggers):
                print(f"{Fore.GREEN}[COLLECT] {action}{Fore.RESET}")
                send_message(vk, action)
                idx = choose_location_action(LAST_BUTTONS)
                time.sleep(4)
                apply_button_index(idx, iid, buttons=LAST_BUTTONS)
                waiting_location = None
                LAST_UNPROCESSED_EVENT = None
                return
        
        # –õ–æ–∫–∞—Ü–∏—è
        if "–õ–æ–∫a—Ü–∏—è" in original_text:
            if LAST_BUTTONS:
                print(f"{Fore.YELLOW}[LOCATION] –û–∂–∏–¥–∞–Ω–∏–µ —Å–±–æ—Ä–∞{Fore.RESET}")
                waiting_location = {"buttons": LAST_BUTTONS}
                waiting_since = time.time()
                LAST_UNPROCESSED_EVENT = None
                reset_memory_state()
                return

        # –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
        if "–ö–≤–∞–¥—Ä–∞—Ç —Ä—É–Ω" in original_text:
            field_buttons = [b for b in LAST_BUTTONS if b["label"] != "–£–π—Ç–∏"]
            if len(field_buttons) == 9:
                solution = solve_lights_out(field_buttons)
                if solution:
                    apply_button_index(solution.pop(), iid)
            LAST_UNPROCESSED_EVENT = None
            return
        # –ò—Å–ø—ã—Ç–∞–Ω–∏—è
        if "–í–∞–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–µ—Ç –Ω–µ–±–æ–ª—å—à–∞—è –∫–æ–º–Ω–∞—Ç–∞ —Å".lower() in text:
            for key, replies in TestDoor.items():
                if key.lower() in text:
                    if isinstance(replies, list):
                        for reply in replies:
                            time.sleep(3)
                            send_message(vk, reply)
                    else:
                        time.sleep(3)
                        send_message(vk, replies)
                    LAST_UNPROCESSED_EVENT = None  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
                    return
        
        # –°—Ç—Ä–∞–Ω–∏—Ü—ã
        if "K–Ω–∏–≥—É —Üe–ª–∏–∫–æ–º —É–∂–µ –Ω–µ —Å–øa—Å—Ç–∏, –Ω–æ –æ–¥–Ωa –∏–∑ —Å—Ç—Äa–Ω–∏—Ü —É—Üe–ª–µ–ª–∞.".lower() in text:
            for boo, replies in Books.items():
                if boo.lower() in text:
                        time.sleep(3)
                        send_message(vk, replies)
                        LAST_UNPROCESSED_EVENT = None  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
                        return
        #–ú—É–¥—Ä–µ—Ü
        Sagestart(text)
        #–†—É–Ω–Ω—ã–π –∫–∞–º–µ–Ω—å
        memory_step(iid)
        #–¢–æ—Ä–≥–æ–≤–µ—Ü
        dealer(text, iid)
        #–ò—Å—Ç–æ—á–Ω–∏–∫
        fountain(text)
        # –û—Ç–¥—ã—Ö
        if " —É –∫–æ—Å—Ç—Ä–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–æ–∏ —Å–∏–ª—ã".lower() in text:
            send_message(vk, "–ò–Ω—Ñ–æ")
            if  GAME_STATE["fish"] + GAME_STATE["meat"] > 0 and GAME_STATE["Hunger"] < 100 - ((GAME_STATE["fish"] * 4) + (GAME_STATE["meat"] * 4)):
                apply_button_index(0, iid)
                GAME_STATE["fish"] = 0
                GAME_STATE["meat"] = 0
        
        # –ü–µ—â–µ—Ä–∞ —á—É–¥–µ—Å
        if "–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±—É–∫–≤—É –∏–ª–∏ —Ç–µ–∫—Å—Ç:" in text.lower():
            for line in text.split('\n'):
                if '‚ñ†' in line:
                    answer, letter = solve_puzzle(line)
                    if answer:
                        time.sleep(7)
                        send_message(vk, answer)
                    elif letter:
                        send_message(vk, letter)
                    LAST_UNPROCESSED_EVENT = None
                    return
        
        # –ß–µ—Ä–µ–ø/–ö–∞–∑–∏–Ω–æ
        if "–ù–æ–≤—ã–π –∑–Ω–∞–∫ –æ–±–æ–π–¥–µ—Ç—Å—è –≤–∞–º:".lower() in text:
            handle_well_event(text, original_text)
            LAST_UNPROCESSED_EVENT = None
            return

        # –ö–æ—Ä–∞–±–ª—å
        if "üëÅ–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–∏–∑—Ä–∞–∫: ".lower() in text:
            apply_button_index(4, iid)

        # –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫
        if "–æ—Å—Ç–∞–ª–æ—Å—å –≤—ã–±—Ä–∞—Ç—å, –∫–∞–∫–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç—å" in text:
            best_path = choose_best_path(event.text)
            if best_path:
                print(f"{Fore.CYAN}[CROSSROAD] –í—ã–±—Ä–∞–Ω –ø—É—Ç—å: {best_path}{Fore.RESET}")
                send_message(vk, best_path)
            else:
                print(f"{Fore.YELLOW}[CROSSROAD] –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—É—á—à–∏–π –ø—É—Ç—å{Fore.RESET}")
            LAST_UNPROCESSED_EVENT = None  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
            return
        
        # –†—ã–±–∞–ª–∫–∞
        if "üêõ–ùa–∂–∏–≤–∫–∏ –æ—Å—Ç–∞–ª–æc—å:".lower() in text:
            Y = int(re.search(r' (\d+)', text).group(1))
            apply_button_index(0 if Y > 0 else 1, iid)
            LAST_UNPROCESSED_EVENT = None
            return
        
        # –í–æ–¥–∞
        if  "–ó–µ–º–ª—è –≤–æ–∫—Ä—É–≥ –≤—ã–≥–ª—è–¥–∏—Ç –æ—á–µ–Ω—å —Å—É—Ö–æ–π,".lower() in text:
            Ms(822456091, "–•–æ—á—É 1 –≤–æ–¥—ã")
            time.sleep(5)
            apply_button_index(0, iid)
        LAST_UNPROCESSED_EVENT = None
def retry_last_event():
    """–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è"""
    global LAST_UNPROCESSED_EVENT
    
    if LAST_UNPROCESSED_EVENT is None:
        print(f"{Fore.GREEN}[RETRY] –ù–µ—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö{Fore.RESET}")
        return
    
    age = time.time() - LAST_UNPROCESSED_EVENT['timestamp']
    if age > 300:
        print(f"{Fore.YELLOW}[RETRY] –°–æ–±—ã—Ç–∏–µ —Å—Ç–∞—Ä–æ–µ ({age:.0f}—Å){Fore.RESET}")
        LAST_UNPROCESSED_EVENT = None
        return
    
    print(f"{Fore.CYAN}[RETRY] –û–±—Ä–∞–±–æ—Ç–∫–∞: {LAST_UNPROCESSED_EVENT['text'][:50]}...{Fore.RESET}")
    
    try:
        class FakeEvent:
            def __init__(self, text, message_id, peer_id):
                self.text = text
                self.message_id = message_id
                self.peer_id = peer_id
                self.type = VkEventType.MESSAGE_NEW
                self.to_me = True
        
        fake_event = FakeEvent(
            LAST_UNPROCESSED_EVENT['text'],
            LAST_UNPROCESSED_EVENT['message_id'],
            iid
        )
        
        process_event(fake_event)
        print(f"{Fore.GREEN}[RETRY] –£—Å–ø–µ—à–Ω–æ!{Fore.RESET}")
        
    except Exception as e:
        print(f"{Fore.RED}[RETRY ERROR] {e}{Fore.RESET}")
        LAST_UNPROCESSED_EVENT = None

# ==================== –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –°–û–û–ë–©–ï–ù–ò–ï ====================
def tech_message(event):
    global BOT_ACTIVE, New_items
    if event.type == VkEventType.MESSAGE_NEW and event.to_me and event.peer_id == mid:
        text = event.text.lower()
        if "Stop".lower() in text:
            BOT_ACTIVE = False
            Ms(mid, "‚õî –ë–æ—Ç –Ω–∞ –ø–∞—É–∑–µ")
        if "Start".lower() in text:
            BOT_ACTIVE = True
            Ms(mid, "‚úÖ –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏–ª —Ä–∞–±–æ—Ç—É")
        if "info".lower() in text:
            debug_info = (
                f"–ì–æ–ª–æ–¥: {GAME_STATE['Hunger']}\n"
                f"‚è±Ô∏è–¢–∞–≤–µ—Ä–Ω–∞ {hours}—á. {minutes}–º {seconds}—Å–µ–∫.\n"
                f"üçñ–ú—è—Å–æ: {GAME_STATE['meat']}\n"
                f"üêü–†—ã–±–∞: {GAME_STATE['fish']}\n"
                f"üñ§–¢—Ä–∞–≤–º—ã: {GAME_STATE['injuries']}\n"
                f"üîì–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: {GAME_STATE['INV']}\n"
                f"üíÄ–¢—Ä–æ—Ñ–µ–∏: {GAME_STATE['trophies']}\n"
                )            
            Ms(mid, debug_info)

        if "/" in text:
            gs = ["trophies", "karma", "injuries", "fish", "meat", "quest"]
            match = re.search(rf'/({"|".join(map(re.escape, gs))})\s+(\d+)', text, re.IGNORECASE)
            if not match :
                return
            key = match.group(1)
            value = int(match.group(2))
            GAME_STATE[key] = value
            Ms(mid, f"{key} = {value}")
        if "item".lower() in text:
            MyItems(event.peer_id)
        if "clear".lower() in text:
            New_items.clear()
            Ms(mid, "‚úÖ –û—á–∏—â–µ–Ω–Ω–æ")

# ==================== –ì–õ–ê–í–ù–´–ô –¶–ò–ö–õ ====================
def main():
    global vk_session, session_api, longpoll, vk, BOT_ACTIVE
    print(f"{Fore.CYAN}[BOT] –ó–∞–ø—É—Å–∫...{Fore.RESET}")
    initialize_connection()
    print(f"{Fore.GREEN}[BOT] –ì–æ—Ç–æ–≤!{Fore.RESET}")
    
    consecutive_errors = 0
    MAX_CONSECUTIVE_ERRORS = 3
    
    while True:
        try:
            for event in longpoll.listen():
                consecutive_errors = 0
                
                # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                if event.peer_id == mid:
                    tech_message(event)
                    continue
                
                # –ò–≥—Ä–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
                if not BOT_ACTIVE:
                    continue
                process_event(event)
                            
        except vk_api.Captcha:
            print(f"{Fore.YELLOW}[CAPTCHA] –í longpoll, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º...{Fore.RESET}")
            time.sleep(5)
            
        except (ProxyError, ReadTimeout, ConnectionError, socket.timeout) as e:
            consecutive_errors += 1
            print(f"{Fore.RED}[NET ERROR] {consecutive_errors}/{MAX_CONSECUTIVE_ERRORS}: {e}{Fore.RESET}")
            
            if consecutive_errors >= MAX_CONSECUTIVE_ERRORS:
                print(f"{Fore.RED}[RECONNECT] –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...{Fore.RESET}")
                try:
                    initialize_connection()
                    consecutive_errors = 0
                    print(f"{Fore.GREEN}[RECONNECT] –£—Å–ø–µ—à–Ω–æ!{Fore.RESET}")
                    retry_last_event()
                except Exception as reconnect_error:
                    print(f"{Fore.RED}[RECONNECT FAILED] {reconnect_error}{Fore.RESET}")
                    time.sleep(30)
            else:
                delay = RETRY_DELAY * consecutive_errors
                print(f"{Fore.YELLOW}[RETRY] –ß–µ—Ä–µ–∑ {delay}—Å...{Fore.RESET}")
                time.sleep(delay)
                
        except KeyboardInterrupt:
            print(f"\n{Fore.YELLOW}[BOT] –û—Å—Ç–∞–Ω–æ–≤–∫–∞{Fore.RESET}")
            break
            
        except Exception as e:
            print(f"{Fore.RED}[ERROR] {e}{Fore.RESET}")
            import traceback
            traceback.print_exc()
            time.sleep(5)

if __name__ == "__main__":
    main()
